!function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/app-header/app-header.html",'<app-loader ng-if="vm.loading"></app-loader><header class="header header_small"><div class="wrap"><div class="header__i"><div class="logo"><a href="{{ \'site.mainPageUrl\' | param }}"><span class="img"></span></a></div><a href="" ng-click="activeNavMobile = !activeNavMobile" class="mainNavBtn mainNavBtn_js mobileShow" ng-class="{ active: activeNavMobile }"><span></span> <span></span> <span></span></a><nav class="userNav"><div class="userNav__i"><ul><li ng-if="vm.availableCurrencies.length > 1"><ui-select ng-model="vm.currentCurrency" theme="selectize" search-enabled="false" ng-change="vm.changeCurrencyLanguage()" name="currency" class="ui-select-header ui-select-header-currency" required=""><ui-select-match placeholder="{{$select.selected.name}}">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="currency.code as currency in vm.availableCurrencies"><span class="currency_sign currency_sign_{{currency.code}}" ng-bind-html="vm.getUnicodeCurrencySign(currency.code)"></span><div ng-bind-html="currency.name"></div></ui-select-choices></ui-select></li><li ng-if="vm.availableLanguages.length > 1"><ui-select ng-model="vm.currentLanguage" theme="selectize" name="language" search-enabled="false" ng-change="vm.changeCurrencyLanguage()" class="ui-select-header ui-select-header-language" required=""><ui-select-match placeholder="{{ $select.selected.title }}">{{ $select.selected.title }}</ui-select-match><ui-select-choices repeat="lang.code as lang in vm.availableLanguages"><div>{{ lang.title }}</div></ui-select-choices></ui-select></li><li ng-if="!vm.authoriseCustomer && (\'site.bookingEnabled\' | param)"><a class="popup_js" href="" fancybox="popupLogin"><i class="fa fa-user"></i></a></li><li ng-if="vm.authoriseCustomer"><ui-select ng-model="vm.privateNav" theme="selectize" name="privateNav" search-enabled="false" ng-change="vm.changePrivateNav()" class="ui-select-header ui-select-header-private-nav" required=""><ui-select-match placeholder="{{ vm.authoriseCustomer.firstName }}&nbsp;{{ vm.authoriseCustomer.lastName }}"><i class="fa fa-user"></i></ui-select-match><ui-select-choices repeat="item.code as item in vm.availablePrivateNavItems"><div>{{ item.title }}</div></ui-select-choices></ui-select></li></ul></div></nav></div><div class="headerAlias" ng-bind-html="vm.headerAliasHtml"></div><div class="headerRight"><div class="headerRight__col"><nav class="userNav"><div class="userNav__i"><ul><li ng-if="vm.authoriseCustomer"><ui-select ng-model="vm.privateNav" theme="selectize" name="privateNav" search-enabled="false" ng-change="vm.changePrivateNav()" class="ui-select-header ui-select-header-private-nav" required=""><ui-select-match placeholder="{{ vm.authoriseCustomer.firstName }}&nbsp;{{ vm.authoriseCustomer.lastName }}">{{ vm.authoriseCustomer.firstName }}&nbsp;{{ vm.authoriseCustomer.lastName }}</ui-select-match><ui-select-choices repeat="item.code as item in vm.availablePrivateNavItems"><div>{{ item.title }}</div></ui-select-choices></ui-select></li><li ng-if="!vm.authoriseCustomer && (\'site.bookingEnabled\' | param)"><a class="popup_js" href="" fancybox="popupLogin">{{ \'web.buttons.login\' | aliasStatic}}</a></li><li ng-if="vm.availableLanguages.length > 1"><ui-select ng-model="vm.currentLanguage" theme="selectize" name="language" search-enabled="false" ng-change="vm.changeCurrencyLanguage()" class="ui-select-header ui-select-header-language" required=""><ui-select-match placeholder="{{ $select.selected.title }}">{{ $select.selected.title }}</ui-select-match><ui-select-choices repeat="lang.code as lang in vm.availableLanguages"><div>{{ lang.title }}</div></ui-select-choices></ui-select></li><li ng-if="vm.availableCurrencies.length > 1"><ui-select ng-model="vm.currentCurrency" theme="selectize" search-enabled="false" ng-change="vm.changeCurrencyLanguage()" name="currency" class="ui-select-header ui-select-header-currency" required=""><ui-select-match placeholder="{{$select.selected.name}}">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="currency.code as currency in vm.availableCurrencies"><span class="currency_sign currency_sign_{{currency.code}}" ng-bind-html="vm.getUnicodeCurrencySign(currency.code)"></span><div ng-bind-html="currency.name"></div></ui-select-choices></ui-select></li></ul></div></nav></div><div ng-if="!vm.isPrivateScreen" class="headerRight__col"><cart-widget></cart-widget></div></div></div><div class="mainNavMobile" ng-class="{ active: activeNavMobile }"><div class="mainNavMobile__i"><div ng-if="!vm.authoriseCustomer" class="item"><a href="" fancybox="popupLogin">{{ \'web.buttons.login\' | aliasStatic}}</a></div><wrap ng-if="vm.authoriseCustomer && !vm.isPrivateScreen"><div class="item"><a href="#{{$root.ROUTES.PRIVATE_ORDERS}}">{{ \'web.steps.privateOrders\' | aliasStatic}}</a></div><div class="item"><a href="#{{$root.ROUTES.PRIVATE_PROFILE}}">{{ \'web.steps.privateProfile\' | aliasStatic}} ({{ vm.authoriseCustomer.firstName }}&nbsp;{{ vm.authoriseCustomer.lastName }})</a></div></wrap><div ng-if="vm.authoriseCustomer" class="item"><a href="" ng-click="vm.logoutHandler()">{{ \'web.buttons.logout\' | aliasStatic}}</a></div><div class="item" ng-if="vm.availableLanguages.length > 1"><div class="selectWrap"><ui-select ng-model="vm.currentLanguage" theme="selectize" name="language" search-enabled="false" ng-change="vm.changeCurrencyLanguage()" class="ui-select-header ui-select-header-language ui-select-header-mobile" required=""><ui-select-match placeholder="{{ $select.selected.title }}">{{ $select.selected.title }}</ui-select-match><ui-select-choices repeat="lang.code as lang in vm.availableLanguages"><div>{{ lang.title }}</div></ui-select-choices></ui-select></div></div><div class="item" ng-if="vm.availableCurrencies.length > 1"><div class="selectWrap"><ui-select ng-model="vm.currentCurrency" theme="selectize" search-enabled="false" ng-change="vm.changeCurrencyLanguage()" name="currency" class="ui-select-header ui-select-header-currency ui-select-header-mobile" required=""><ui-select-match placeholder="{{$select.selected.name}}">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="currency.code as currency in vm.availableCurrencies"><span class="currency_sign currency_sign_{{currency.code}}" ng-bind-html="vm.getUnicodeCurrencySign(currency.code)"></span><div ng-bind-html="currency.name"></div></ui-select-choices></ui-select></div></div></div></div></header><div ng-if="vm.errorMessage" class="header-error-cont wrap"><div class="infoMessage infoMessage_error"><div class="infoMessage__i"><p>{{ vm.errorMessage | aliasDynamic }}</p></div></div></div><wrap ng-if="!vm.loading"><popup-login></popup-login><popup-registration></popup-registration><popup-reset-password></popup-reset-password><popup-resend-activation-mail></popup-resend-activation-mail><popup-compare ng-if="( \'search.useMonoBrandCartesian\' | param )"></popup-compare><popup-session-inactive></popup-session-inactive><popup-captcha-required></popup-captcha-required><popup-order-email-required></popup-order-email-required><popup-patronymic-required></popup-patronymic-required><popup-cancel-session></popup-cancel-session><popup-change-currency-error></popup-change-currency-error></wrap>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/city-picker/city-picker.html",'<div class="col" ng-class="{ dropActive:active }" city-picker-fix=""><div class="inp" ng-class="{ inpFrom: (role == \'origin\'), inpFrom_js: (role == \'origin\'), inpTo: (role == \'destination\'), inpTo_js: (role == \'destination\') }"><div class="inp__i"><p class="iata iataSelected_js">{{ selectedCity.codeEn }}</p><a href="" ng-click="dropClick(this)" class="arrowDown"><i class="icon_selectArr"></i></a><div class="errorMessage" ng-show="submitTouched && !selectedCity"><p>{{ \'web.messages.required\' | aliasStatic}}</p></div><input type="text" placeholder="{{ placeholder }}" autocomplete="off" tabindex="{{ pickerindex }}" class="textInp textInp_js" ng-class="{ textInp_error:(submitTouched && !selectedCity), textInpFrom_js: (role == \'origin\'), textInpTo_js: (role == \'destination\') }" ng-change="substrChange(true)" ng-focus="searchFocus()" ng-blur="searchBlur($event)" ng-model="searchSubstr"><div class="cityDrop cityDrop_js"><div class="cityDrop__i"><ul><li ng-repeat="city in filteredCitiesList | orderBy:\'direct\'" class="city-code-{{city.codeEn}}" ng-class="{ popular:city.popular }"><a class="city_js" href="" ng-click="cityItemClick(city);"><span class="name" ng-class="{\'name--bold\': city.direct && role === \'destination\'}" ng-bind-html="highlightSubstr(city[localNamePropName])"></span> <span class="iata" ng-bind-html="highlightSubstr(city.codeEn)"></span></a><ul ng-class="{ \'single-port-list\': city.airports.length == 1 }"><li ng-if="city.airports" class="city-port city-port-code-{{port.codeEn}}" ng-repeat="port in city.airports"><a href="" ng-click="portItemClick(city, port)"><span class="name">{{port[localNamePropName]}}</span> <span class="iata">{{port.codeEn}}</span></a></li></ul></li></ul></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/es-seat/es-seat.html",'<div class="item__i mobileHide"><div class="top"><div class="top__i"><table><tbody><tr><td><div class="text"><div class="iconBox" ng-click="vm.switchService()"><i class="icon_seat-reservation"></i></div><div class="name"><h2>{{ \'web.extraServices.seat.header\' | aliasStatic}} <a href="" fancybox="popupAlias" data-popup-alias="web.extraServicesRules.seat"><span class="infoBoxWrap"><i class="icon_info"></i> <span class="infoBox"><span class="infoBox__i">{{ \'web.extraServices.serviceDesc\' | aliasStatic}}</span></span></span></a></h2><p>{{ \'web.extraServices.seat.desc\' | aliasStatic}}</p></div></div></td><td><div ng-if="vm.service.active && vm.service.editablePrice" class="price"><div class="price__i"><h3 ng-bind-html="{ value: vm.service.editablePrice.price, currency: vm.service.editablePrice.currency } | price"></h3></div></div><div ng-if="!vm.service.active && vm.service.minPrice" class="price"><div class="price__i"><p>{{ \'web.extraServices.minPrice\' | aliasStatic}}</p><h3 ng-bind-html="{ value: vm.service.minPrice.price, currency: vm.service.minPrice.currency } | price"></h3><p>{{ \'web.extraServices.seat.minPriceUnit\' | aliasStatic}}</p></div></div></td><td><a href="" ng-click="vm.switchService()" ng-if="!vm.checkServiceRemovalProhibited(\'seat\')" ng-class="{ active: vm.service.active, control_disabled: vm.locked }" class="btn showDrop_js"><span class="show">{{ \'web.extraServices.seat.select\' | aliasStatic}}</span> <span class="hide">{{ \'web.extraServices.seat.deselect\' | aliasStatic}}</span></a></td></tr></tbody></table></div></div><div class="drop" ng-class="{ active: vm.service.active, show_js: vm.service.active }"><div class="drop__i"><div class="seatSelect"><div class="seatSelect__i"><table class="passengersTable"><tbody><tr class="headRow"><td class="firstCol"></td><td ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers">{{ passenger.lastName }} {{ passenger.firstName }}</td></tr><tr ng-repeat-start="(flightNum, flight) in vm.orderInfo.plainFlights" class="contentRow"><td class="firstCol"><div class="date">{{ flight.date | formatDate: \'D MMMM, dd\'}}</div><div class="route"><geo-marker prefix="dep__point" key="es-seat" city="flight.origincity" cityname="flight.origincityName" port="flight.originport" portname="flight.originportName"></geo-marker><div class="route__plane"><i class="icon_plane"></i></div><geo-marker prefix="arr__point" key="es-seat" city="flight.destinationcity" cityname="flight.destinationcityName" port="flight.destinationport" portname="flight.destinationportName"></geo-marker></div></td><td ng-if="vm.service.unavailableBecauseOfCheckInBySegments[flightNum]" colspan="{{ vm.orderInfo.passengers.length }}"><div class="message_unavailableBecauseOfCheckIn"><span ng-if="vm.isBookingScreen" ng-bind-html="\'web.extraServices.seat.unavailableBecauseOfCheckIn.booking\' | aliasStatic"></span> <span ng-if="!vm.isBookingScreen" ng-bind-html="\'web.extraServices.seat.unavailableBecauseOfCheckIn.addServices\' | aliasStatic"></span></div></td><td ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers" ng-if="!vm.service.unavailableBecauseOfCheckInBySegments[flightNum]" ng-class="{ active: vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum }"><wrap ng-if="vm.service.availableByPassengerSegments[passengerNum][flightNum]"><a href="" ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" class="passengersTable__link" ng-class="{ passengersTable__link_empty: !vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum], passengersTable__link_select: (!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum) }"><wrap ng-if="!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && (vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum)">{{ \'web.extraServices.seat.selectItem\' | aliasStatic}}</wrap><wrap ng-if="!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !(vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum)">{{ \'web.extraServices.seat.noneSelected\' | aliasStatic}}</wrap><wrap ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]">{{ vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].value }}</wrap></a> <span ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]" class="passengersTable__priceSeat" ng-bind-html="{ value: vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].totalPrice, currency: vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].currency } | price"></span> <a ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !vm.checkServiceRemovalProhibited(\'seat\', passengerNum, flightNum)" href="" ng-click="vm.removePassengerFlightSeat(passengerNum, flightNum)" class="btn-remove"><span class="infoBoxWrap"><i class="icon_remove"></i> <span class="infoBox"><span class="infoBox__i">{{ \'web.extraServices.seat.cancelByPassengerSegment\' | aliasStatic }}</span></span></span></a><div ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].reservedUntil" class="passengersTable__reservedUntil"><span class="reservedUntil__label">{{ \'web.extraServices.seat.reservedUntil\' | aliasStatic}}</span> <span class="reservedUntil__value">{{vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].reservedUntil}}</span></div></wrap><wrap ng-if="!vm.service.availableByPassengerSegments[passengerNum][flightNum] && !passenger.hasSeats">{{ \'web.extraServices.seat.selectUnavailable\' | aliasStatic}}</wrap><wrap ng-if="vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]">{{ \'web.extraServices.seat.issuedSeatLabel\' | aliasStatic}} <a href="" ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" class="passengersTable__link">{{ vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].value }}</a> <span ng-if="vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]" class="passengersTable__priceSeat" ng-bind-html="{ value: vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].totalPrice, currency: vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].currency } | price"></span></wrap></td></tr><tr ng-repeat-end="" class="contentServiceRow"><td ng-if="flightNum == vm.selectedFlight" class="firstCol"></td><td ng-if="flightNum == vm.selectedFlight" colspan="{{ vm.orderInfo.passengers.length }}"><div class="col"><div class="info"><div class="info__i"><p class="sun">{{ vm.sunInfoByFlights[vm.selectedFlight] }}</p><div ng-if="!vm.loadingSeatMap && vm.seatMap" class="seatInfo"><ul><li class="free"><span></span> {{ \'web.extraServices.seat.free\' | aliasStatic}}</li><li class="selected"><span></span> {{ \'web.extraServices.seat.selected\' | aliasStatic}}</li><li class="selectedByOrderPassenger" ng-if="vm.getAvailablePassengersCount(vm.service.availableByPassengerSegments) > 1"><span></span> {{ \'web.extraServices.seat.selectedByOrderPassenger\' | aliasStatic}}</li><li class="disabled"><span></span> {{ \'web.extraServices.seat.disabled\' | aliasStatic}}</li><li ng-if="vm.seatMap.hasAutoAssignedSeat && vm.seatMap.hasFreeAndAutoAssignedSeat" class="seat-auto-assigned"><span></span> {{ \'web.extraServices.seat.freeAndAutoAssignedSeat\' | aliasStatic}}</li><li ng-if="vm.seatMap.hasAutoAssignedSeat && !vm.seatMap.hasFreeAndAutoAssignedSeat" class="seat-auto-assigned"><span></span> {{ \'web.extraServices.seat.autoAssignedSeat\' | aliasStatic}}</li><li ng-repeat="svc in vm.seatMap.svcs track by $index" class="rfiscs-seat-label"><span class="color-marker seat-rfisc-{{ svc.rfisc }} seat-map-color-group-{{ svc.index }}"></span> <span class="rfiscs-seat-label-cost" ng-bind-html="{ value: svc.cost, currency: svc.currency } | price"></span> <span ng-if="\'extraServices.showSeatMapLegendTitleLabel\' | param" class="rfiscs-seat-label-title">{{ svc.title }}</span> <span ng-if="\'extraServices.showSeatMapLegendDescriptionLabel\' | param" class="rfiscs-seat-label-description" ng-bind-html="svc.description | aliasDynamic"></span></li><wrap ng-if="vm.hasAlias(\'web.extraServices.seat.customLabels\')" ng-bind-html="\'web.extraServices.seat.customLabels\' | aliasStatic"></wrap></ul><div class="rsln-seat-additional-info" ng-bind-html="\'web.extraservices.seat.additionalInfo\' | aliasStatic"></div></div></div></div></div><div ng-if="vm.loadingSeatMap" class="seat-map-loader" ng-bind-html="\'web.extraServices.seat.loader\' | aliasStatic"></div><div ng-if="vm.seatMapError" class="seat-map-error">{{ vm.seatMapError | aliasDynamic }}</div><div ng-if="vm.modifyError" class="infoMessage infoMessage_error"><div class="infoMessage__i"><p ng-bind-html="vm.modifyError | aliasDynamic"></p></div></div><div ng-if="!vm.loadingSeatMap && vm.seatMap" id="seatMapCont" class="col mobileHide customScroll_height customScroll_js" custom-scroll=""><seat-map map="vm.seatMap" passenger="vm.selectedPassenger" flight="vm.selectedFlight" locked="vm.locked" selected="vm.service.selectedSeatsByPassengerSegments" issued="vm.service.issuedSeatsByPassengerSegments" set="vm.setPassengerFlightSeat"></seat-map></div></td></tr></tbody></table><div class="passengersTable__cancel"><a href="" ng-click="vm.switchService()" ng-if="!vm.checkServiceRemovalProhibited(\'seat\')" class="passengersTable__link passengersTable__link_cancel">{{ \'web.extraServices.seat.cancel\' | aliasStatic}}</a></div></div></div></div></div></div><div class="item__i mobileShow"><div class="top"><div class="top__i"><a href=""><div class="row"><table><tbody><tr><td><i class="icon_seat"></i></td><td><div class="name">{{ \'web.extraServices.seat.header\' | aliasStatic}} <a href="" fancybox="popupAlias" data-popup-alias="web.extraServicesRules.seat"><i class="icon_info"></i></a></div></td></tr></tbody></table></div></a><div class="row"><a href=""><div ng-if="vm.service.active && vm.service.editablePrice" class="price"><div class="price__i"><h3 ng-bind-html="{ value: vm.service.editablePrice.price, currency: vm.service.editablePrice.currency } | price"></h3></div></div><div ng-if="!vm.service.active && vm.service.minPrice" class="price"><div class="price__i"><p>{{ \'web.extraServices.minPrice\' | aliasStatic}}</p><h3 ng-bind-html="{ value: vm.service.minPrice.price, currency: vm.service.minPrice.currency } | price"></h3><p>{{ \'web.extraServices.seat.minPriceUnit\' | aliasStatic}}</p></div></div></a> <a href="" ng-click="vm.switchService()" ng-if="!vm.checkServiceRemovalProhibited(\'seat\')" ng-class="{ active: vm.service.active }" class="btn showDrop_js"><span class="show">{{ \'web.extraServices.seat.select\' | aliasStatic}}</span> <span class="hide">{{ \'web.extraServices.seat.deselect\' | aliasStatic}}</span></a></div></div></div><div class="drop" ng-class="{ active: vm.service.active, show_js: vm.service.active }"><div class="drop__i"><div class="seatSelect drop_mobile"><div class="seatSelect__i"><div class="passengersContainer"><div class="passengersTableContainer" ng-class="{ one_passenger: vm.getAvailablePassengersCountWrap(vm.service.availableByPassengerSegments) == 1 }"><a href="" ng-click="vm.scrollToEnd();" class="passengersTableContainer__control passengersTableContainer__control_next" ng-class="{ control_disabled: !vm.canScrollRight }"></a><table class="passengersTable"><tbody><tr class="headRow"><td class="firstCol"><a href="" ng-click="vm.scrollToStart();" class="passengersTable__control passengersTable__control_prev" ng-class="{ control_disabled: !vm.canScrollLeft }"></a></td><td ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers">{{ passenger.lastName }} {{ passenger.firstName }}</td></tr><tr ng-repeat="(flightNum, flight) in vm.orderInfo.plainFlights" class="contentRow"><td class="firstCol"><div class="date">{{ flight.date | formatDate: \'D MMMM, dd\'}}</div><div class="route"><div class="route__dep"><span class="route__dep__city">{{ flight.originport || flight.origincity }}</span></div><div class="route__plane"><i class="icon_plane"></i></div><div class="route__arr"><span class="route__arr__city">{{ flight.destinationport || flight.destinationcity }}</span></div></div></td><td ng-if="vm.service.unavailableBecauseOfCheckInBySegments[flightNum]" colspan="{{ vm.orderInfo.passengers.length }}"><div class="message_unavailableBecauseOfCheckIn"><span ng-if="vm.isBookingScreen" ng-bind-html="\'web.extraServices.seat.unavailableBecauseOfCheckIn.booking\' | aliasStatic"></span> <span ng-if="!vm.isBookingScreen" ng-bind-html="\'web.extraServices.seat.unavailableBecauseOfCheckIn.addServices\' | aliasStatic"></span></div></td><td ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers" ng-if="!vm.service.unavailableBecauseOfCheckInBySegments[flightNum]" ng-class="{ active: vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum }"><wrap ng-if="vm.service.availableByPassengerSegments[passengerNum][flightNum]"><a href="" fancybox="popupSeat" ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" class="passengersTable__link" ng-class="{ passengersTable__link_empty: !vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum], passengersTable__link_select: (!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum) }"><wrap ng-if="!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && (vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum)">{{ \'web.extraServices.seat.selectItem\' | aliasStatic}}</wrap><wrap ng-if="!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !(vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum)">{{ \'web.extraServices.seat.noneSelected\' | aliasStatic}}</wrap><wrap ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]">{{ vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].value }}</wrap></a> <span ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]" class="passengersTable__priceSeat" ng-bind-html="{ value: vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].totalPrice, currency: vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].currency } | price"></span> <a ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !vm.checkServiceRemovalProhibited(\'seat\', passengerNum, flightNum)" href="" ng-click="vm.removePassengerFlightSeat(passengerNum, flightNum)" class="btn-remove"><span class="infoBoxWrap"><i class="icon_remove"></i> <span class="infoBox"><span class="infoBox__i">{{ \'web.extraServices.seat.cancelByPassengerSegment\' | aliasStatic }}</span></span></span></a><div ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].reservedUntil" class="passengersTable__reservedUntil"><span class="reservedUntil__label">{{ \'web.extraServices.seat.reservedUntil\' | aliasStatic}}</span> <span class="reservedUntil__value">{{vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].reservedUntil}}</span></div></wrap><wrap ng-if="!vm.service.availableByPassengerSegments[passengerNum][flightNum] && !passenger.hasSeats">{{ \'web.extraServices.seat.selectUnavailable\' | aliasStatic}}</wrap><wrap ng-if="vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]">{{ \'web.extraServices.seat.issuedSeatLabel\' | aliasStatic}} <a href="" fancybox="popupSeat" ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" class="passengersTable__link">{{ vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].value }}</a> <span ng-if="vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]" class="passengersTable__priceSeat" ng-bind-html="{ value: vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].totalPrice, currency: vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].currency } | price"></span></wrap></td></tr></tbody></table></div><div class="passengersTable__cancel"><a href="" ng-click="vm.switchService()" ng-if="!vm.checkServiceRemovalProhibited(\'seat\')" class="passengersTable__link passengersTable__link_cancel">{{ \'web.extraServices.seat.cancel\' | aliasStatic}}</a></div></div></div></div></div></div><popup-seat map="vm.seatMap" sun="vm.sunInfoByFlights[vm.selectedFlight]" order="vm.orderInfo" passenger="vm.selectedPassenger" flight="vm.selectedFlight" locked="vm.locked" select-handler="vm.setPassengerFlightSeat" remove-handler="vm.removePassengerFlightSeat" selected="vm.service.selectedSeatsByPassengerSegments" issued="vm.service.issuedSeatsByPassengerSegments" items="vm.service.itemsByPassengerSegments" available-passengers-count="vm.getAvailablePassengersCount(vm.service.availableByPassengerSegments)" subgroups="vm.service.subgroups"></popup-seat></div>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/grouped-services-list/grouped-services-list.html",'<wrap ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ].length"><wrap ng-repeat="(passengerNumber, passenger) in vm.orderInfo.passengers" ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ][passengerNumber]"><div class="item"><div class="item__i"><p><strong>{{ passenger.lastName }} {{ passenger.firstName }}</strong></p><wrap ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ][passengerNumber].passengerSegmentServices"><wrap ng-repeat="(segmentNumber, segment) in vm.orderInfo.plainFlights"><div ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ][passengerNumber].passengerSegmentServices[segmentNumber]" class="passenger-segment-services">{{ \'web.orderInfo.extraServices.flight\' | aliasStatic}} {{ segment.company.code }}-{{ segment.racenumber }}<ul><wrap ng-repeat="passengerSegmentService in vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ][passengerNumber].passengerSegmentServices[segmentNumber]"><li ng-if="passengerSegmentService.code == \'seat\'"><span ng-class="{ line_through: passengerSegmentService.serviceItem.removed }" title="{{ (passengerSegmentService.serviceItem.removed ? ( \'web.orderInfo.extraServiceRemoved\' | aliasStatic) : \'\') }}">{{ \'web.orderInfo.extraServices.seat\' | aliasStatic}} {{ passengerSegmentService.serviceItem.value }}</span> <span ng-if="passengerSegmentService.serviceItem.status" class="service-status service-status-{{ passengerSegmentService.serviceItem.status }}">{{ \'web.serviceStatus.\' | aliasWithPrefix:passengerSegmentService.serviceItem.status }}</span></li><li ng-if="passengerSegmentService.code == \'meal\'"><span ng-class="{ line_through: passengerSegmentService.serviceItem.removed }" title="{{ (passengerSegmentService.serviceItem.removed ? ( \'web.orderInfo.extraServiceRemoved\' | aliasStatic) : \'\') }}">{{ \'web.orderInfo.extraServices.meal\' | aliasStatic}} {{ passengerSegmentService.serviceItem.title }}</span> <span ng-if="passengerSegmentService.serviceItem.status" class="service-status service-status-{{ passengerSegmentService.serviceItem.status }}">{{ \'web.serviceStatus.\' | aliasWithPrefix:passengerSegmentService.serviceItem.status }}</span></li><wrap ng-if="passengerSegmentService.code == \'baggage\'"><li ng-repeat="baggageItem in passengerSegmentService.items"><span ng-class="{ line_through: baggageItem.removed }" title="{{ (baggageItem.removed ? ( \'web.orderInfo.extraServiceRemoved\' | aliasStatic) : \'\') }}">{{ baggageItem.title }}<wrap ng-if="baggageItem.affectedSegmentIds.length">{{ \' (\' }}<wrap ng-repeat="(flightNum, flight) in vm.getAffectedFlightsByIds(baggageItem.affectedSegmentIds)">{{ flightNum ? \', \' : \'\' }}{{ \'web.extraServices.baggage.flight\' | aliasStatic}} {{ flight.company.code || flight.company.code_en }}-{{ flight.racenumber }}</wrap>{{ \')\' }}</wrap></span> <span ng-if="baggageItem.status" class="service-status service-status-{{ baggageItem.status }}">{{ \'web.serviceStatus.\' | aliasWithPrefix:baggageItem.status }}</span></li></wrap><li ng-if="vm.isCommonService(passengerSegmentService.code)"><span ng-class="{ line_through: passengerSegmentService.serviceItem.removed }" title="{{ (passengerSegmentService.serviceItem.removed ? ( \'web.orderInfo.extraServiceRemoved\' | aliasStatic) : \'\') }}">{{ \'web.orderInfo.extraServices.\' | aliasWithPrefix:passengerSegmentService.code }}</span> <span ng-if="passengerSegmentService.serviceItem.status" class="service-status service-status-{{ passengerSegmentService.serviceItem.status }}">{{ \'web.serviceStatus.\' | aliasWithPrefix:passengerSegmentService.serviceItem.status }}</span></li><li ng-if="passengerSegmentService.code == \'aeroexpress\'"><span ng-class="{ line_through: passengerSegmentService.serviceItem.removed }" title="{{ (passengerSegmentService.serviceItem.removed ? ( \'web.orderInfo.extraServiceRemoved\' | aliasStatic) : \'\') }}">{{ \'web.orderInfo.extraServices.aeroexpress\' | aliasStatic}} {{ passengerSegmentService.serviceItem.departure_date }} {{ passengerSegmentService.serviceItem.departure_name }} - {{ passengerSegmentService.serviceItem.arrival_name }}</span> <a ng-if="passengerSegmentService.serviceItem.canRefund" href="" fancybox="popupAeroexpressRefund" class="btn-remove" data-ticket="{{ passengerSegmentService.serviceItem.ticketNumber }}" data-cost="{{ passengerSegmentService.serviceItem.fare.cost }}" data-currency="{{ passengerSegmentService.serviceItem.fare.currency }}"><span class="infoBoxWrap"><i class="icon_remove"></i> <span class="infoBox"><span class="infoBox__i">{{ \'web.orderInfo.label.aeroexpressRefund\' | aliasStatic}}</span></span></span></a></li></wrap></ul></div></wrap></wrap></div></div></wrap><wrap ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesForAllPassengers\' ].length"><div class="item"><div class="item__i"><p><strong>{{ \'web.orderInfo.extraServicesForAllPassengers\' | aliasStatic}}</strong></p><wrap ng-repeat="orderService in vm.orderInfo[ vm.mode + \'ExtraServicesForAllPassengers\' ]"><p ng-if="orderService.code == \'insurance\' && orderService.items[0][0]" ng-bind-html="\'web.insurance.\' | aliasWithPrefix:(orderService.items[0][0].ins + \'.\' + orderService.items[0][0].tins)"></p></wrap></div></div></wrap></wrap><wrap ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByExtraPassengers\' ].length"><wrap ng-repeat="(passengerNumber, passenger) in vm.orderInfo.extraPassengers" ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByExtraPassengers\' ][passengerNumber]"><div class="item"><div class="item__i"><p><strong>{{ passenger.lastName }} {{ passenger.firstName }}</strong></p><wrap ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByExtraPassengers\' ][passengerNumber].passengerSegmentServices"><wrap ng-repeat="(segmentNumber, segment) in vm.orderInfo.plainFlights"><div ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByExtraPassengers\' ][passengerNumber].passengerSegmentServices[segmentNumber]" class="passenger-segment-services">{{ \'web.orderInfo.extraServices.flight\' | aliasStatic}} {{ segment.company.code }}-{{ segment.racenumber }}<ul><wrap ng-repeat="passengerSegmentService in vm.orderInfo[ vm.mode + \'ExtraServicesByExtraPassengers\' ][passengerNumber].passengerSegmentServices[segmentNumber]"><li ng-if="passengerSegmentService.code == \'aeroexpress\'"><span ng-class="{ line_through: passengerSegmentService.serviceItem.removed }" title="{{ (passengerSegmentService.serviceItem.removed ? ( \'web.orderInfo.extraServiceRemoved\' | aliasStatic) : \'\') }}">{{ \'web.orderInfo.extraServices.aeroexpress\' | aliasStatic}} {{ passengerSegmentService.serviceItem.departure_date }} {{ passengerSegmentService.serviceItem.departure_name }} - {{ passengerSegmentService.serviceItem.arrival_name }}</span> <a ng-if="passengerSegmentService.serviceItem.canRefund" href="" fancybox="popupAeroexpressRefund" class="btn-remove" data-ticket="{{ passengerSegmentService.serviceItem.ticketNumber }}" data-cost="{{ passengerSegmentService.serviceItem.fare.cost }}" data-currency="{{ passengerSegmentService.serviceItem.fare.currency }}"><span class="infoBoxWrap"><i class="icon_remove"></i> <span class="infoBox"><span class="infoBox__i">{{ \'web.orderInfo.label.aeroexpressRefund\' | aliasStatic}}</span></span></span></a></li></wrap></ul></div></wrap></wrap></div></div></wrap></wrap><wrap ng-if="!vm.orderInfo.allExtraServicesForAllPassengers.length && !vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ].length"><p>{{ \'web.orderInfo.extraServicesEmpty\' | aliasStatic}}</p></wrap>');
}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/order/order.html",'<app-loader ng-if="vm.loading"></app-loader><div ng-if="vm.errorMessage" class="message_error">{{ vm.errorMessage | aliasDynamic }}</div><div ng-if="!vm.loading && vm.orderInfo && !vm.errorMessage" class="invoice"><div class="invoice__i"><div ng-if="vm.orderInfo.header.regnum" class="invoiceInfo"><div class="invoiceInfo__i"><span class="orderNum">{{ \'web.orderInfo.orderNum\' | aliasStatic}} {{ vm.orderInfo.header.regnum }}</span> <span class="status" ng-class="{ notPayed: vm.orderInfo.header.status == \'cancelled\' }">{{ \'web.orderInfo.label.orderStatus.\' | aliasWithPrefix:vm.orderInfo.header.status }}<wrap ng-if="vm.orderInfo.paymentform">, {{ \'web.orderinfo.paymenttype.\' | aliasWithPrefix:vm.orderInfo.paymentform }}</wrap>{{ \'. \' }}<wrap ng-if="vm.orderInfo.header.status == \'booked\' || vm.orderInfo.header.status == \'being_paid\' || vm.orderInfo.header.status == \'payment_received\'"><wrap ng-if="vm.orderInfo.header.paymentNotAllow">{{ \'web.orderInfo.label.timeoutPaymentNotAllow\' | aliasStatic}} {{ vm.orderInfo.header.validThru }}</wrap><wrap ng-if="!vm.orderInfo.header.paymentNotAllow">{{ \'web.orderInfo.label.timeout\' | aliasStatic}} {{ vm.orderInfo.header.validThru }}</wrap></wrap><wrap ng-if="(!vm.orderInfo.hasFailedServices || vm.ignoreFailedServices) && vm.orderInfo.paycode"><br>{{ \'web.orderInfo.label.paycode\' | aliasStatic}} <b>{{ vm.orderInfo.paycode }}</b></wrap></span></div><div ng-if="vm.orderInfo.header.status == \'paid\'" class="btn_receipt_cont"><a ng-href="./receipt?pnr={{ vm.orderInfo.header.regnum }}&lastName={{ vm.orderInfo.header.lastName }}&tabId={{ vm.tabId }}" target="_blank" class="show_receipt">{{ \'web.orderInfo.actions.receipt\' | aliasStatic}}</a> <a href="" fancybox="popupSendReceipt" class="send_receipt"></a></div></div><div class="invoiceDrops"><div ng-if="vm.orderInfo.flights.length" class="item dropWrapper" ng-class="{ active: vm.dropState[0] }"><div class="item__i"><div class="title"><a href="" ng-click="vm.dropState[0] = !vm.dropState[0]" class="openDrop"><span class="circle"><i class="icon_triangle"></i></span><route-desc segments="vm.orderInfo.flights" flights="vm.orderInfo.plainFlights"></route-desc></a></div><div class="drop" ng-class="{ show_js: vm.dropState[0] }"><div class="drop__i"><div class="choosenFlight"><div class="choosenFlight__i"><div class="chooseResult"><div class="chooseResult__i chooseResult__i__order"><div ng-repeat="(segNum, segment) in vm.orderInfo.flights" class="flight"><div class="route_item_container" ng-repeat="(flightNum, flight) in segment.flights"><div class="route_item"><div class="route__i route_container"><div class="route_table"><div class="dep"><div class="dep__date" ng-class="{ nextDay: flight.departuredayshift, attention: flight.departuredayshift}">{{ flight.departuredate | formatDate: \'D MMM, dd\' }}</div><div class="dep__time">{{ flight.departuretime }}</div><geo-marker prefix="dep__point" key="booking" city="flight.origincity" cityname="flight.origincityName" port="flight.originport" portname="flight.originportName"></geo-marker></div><div class="info"><i class="icon_plane"></i><div class="info__number">{{ flight.company.code_en }}-{{ flight.racenumber }}</div><div class="info__timeEnRoute">{{ flight.flighttime | timeAsWords }}</div></div><div class="arr"><div class="arr__date" ng-class="{ nextDay: flight.arrivaldayshift, attention: flight.arrivaldayshift}">{{ flight.arrivaldate | formatDate: \'D MMM, dd\' }}</div><div class="arr__time">{{ flight.arrivaltime }}</div><geo-marker prefix="arr__point" key="booking" city="flight.destinationcity" cityname="flight.destinationcityName" port="flight.destinationport" portname="flight.destinationportName"></geo-marker></div></div></div><div class="route__i additional"><span class="additional__company">{{ \'web.choosenFlight.company\' | aliasStatic}} {{ flight.company.name }}</span> <span class="additional__company" ng-if="flight.operatingCompany">{{ \'web.search.results.operatingCompany\' | aliasStatic}} {{ flight.operatingCompany.name }}</span> <span class="additional__plane">{{ flight.airplaneName }}</span></div></div><div ng-if="segment.connections[flightNum]" ng-init="connection=segment.connections[flightNum]" class="transfer"><span class="transfer__text"><strong>{{ \'web.choosenFlight.connection\' | aliasStatic}} {{ connection.time | timeAsWords }}</strong></span> <span ng-if="connection.previousAirport && connection.nextAirport && connection.previousAirport != connection.nextAirport" class="terminalChange">{{ \'web.choosenFlight.airportChange\' | aliasStatic}} (<span class="terminalName">{{ connection.previousAirport }}</span> <span class="terminalName">{{ connection.nextAirport }}</span>)</span> <span ng-if="connection.previousAirport == connection.nextAirport && connection.previousTerminal && connection.nextTerminal && connection.previousTerminal != connection.nextTerminal" class="terminalChange">{{ \'web.choosenFlight.terminalChange\' | aliasStatic}} (<span class="terminalName">{{ connection.previousTerminal }}</span> <span class="terminalName">{{ connection.nextTerminal }}</span>)</span></div><div ng-repeat="landing in flight.landings" class="landing"><span class="landing__text"><strong>{{ \'web.searchScheduleResult.landing\' | aliasStatic}}</strong></span><p class="landing__airport">{{ landing.landingCityName }} ({{ landing.landingTime | timeAsWords }})</p></div></div><div ng-if="segment.flights.length > 1" class="timeEnRoute">{{ \'web.choosenFlight.flighttime\' | aliasStatic}} {{ segment.flightTime | timeAsWords }}</div><div class="rsln-choosenFlight__selected__flight__fare__features" ng-if="$root.getBrandProps(segment.flights[0].brand) && $root.getBrandProps(segment.flights[0].brand).length > 0"><div class="rsln-choosenFlight__selected__flight__fare__features__item" ng-repeat="(propNum, prop) in $root.getBrandProps(segment.flights[0].brand)" ng-if="prop.shortDesc"><span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_free" ng-if="prop.available == \'yes\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_paid" ng-if="prop.available == \'paid\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_no" ng-if="prop.available == \'no\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__content" ng-bind-html="prop.shortDesc"></span></div></div></div></div></div></div></div></div></div></div></div><div class="item dropWrapper" ng-class="{ active: vm.dropState[1] }"><div class="item__i"><div class="title"><a href="" ng-click="vm.dropState[1] = !vm.dropState[1]" class="openDrop"><span class="circle"><i class="icon_triangle"></i></span> {{ \'web.orderInfo.passengers\' | aliasStatic}} <span ng-repeat="(num, passenger) in vm.orderInfo.passengers"><span ng-if="num">,</span> {{ passenger.lastName }} {{ passenger.firstName }}</span></a></div><div class="drop" ng-class="{ show_js: vm.dropState[1] }"><div class="drop__i"><div class="passengerInvoiceInfo"><div class="passengerInvoiceInfo__i"><div class="row"><table><tbody ng-repeat="(num, passenger) in vm.orderInfo.passengers" ng-class="{ withoutSeat: !passenger.hasSeats }"><tr><th colspan="3"><i ng-if="!passenger.hasSeats" class="icon_child-discount"></i> <strong>{{ passenger.lastName }} {{ passenger.firstName }}</strong></th></tr><tr><td><p>{{ \'web.orderInfo.passenger.dateOfBirth\' | aliasStatic}} {{ passenger.dateOfBirth }}</p><p>{{ \'web.orderInfo.passenger.gender\' | aliasStatic}} {{ \'web.orderInfo.label.gender.\' | aliasWithPrefix:passenger.gender }}</p><p>{{ \'web.orderInfo.passenger.nationality\' | aliasStatic}} {{ passenger.nationality }}</p><p ng-if="passenger.phone">{{ \'web.orderInfo.passenger.phone\' | aliasStatic}} {{ passenger.phone }}</p><p ng-if="passenger.eMail">{{ \'web.orderInfo.passenger.eMail\' | aliasStatic}} {{ passenger.eMail }}</p></td><td><p>{{ \'web.orderInfo.passenger.documentType\' | aliasStatic}} {{ passenger.documentType }}</p><p>{{ \'web.orderInfo.passenger.documentNumber\' | aliasStatic}} {{ passenger.documentNumber }}</p><p class="documentDate" ng-if="passenger.documentDate">{{ \'web.orderInfo.passenger.documentDate\' | aliasStatic}} {{ passenger.documentDate }}</p></td><td><p ng-if="passenger.tickets"><strong>{{ \'web.orderInfo.passenger.ticket\' | aliasStatic}} <span ng-repeat="(tickNum, ticket) in passenger.tickets"><span ng-if="tickNum">,</span> {{ ticket }}</span></strong></p><p ng-if="passenger.bonusCard">{{ \'web.orderInfo.passenger.bonusCard\' | aliasStatic}} {{ passenger.bonusCard }}</p></td></tr></tbody></table></div></div></div></div></div></div></div><div class="item dropWrapper" ng-class="{ active: vm.dropState[2] }"><div class="item__i"><div class="title"><a href="" ng-click="vm.dropState[2] = !vm.dropState[2]" class="openDrop"><span class="circle"><i class="icon_triangle"></i></span> {{ \'web.orderInfo.label.customer\' | aliasStatic}} <span>{{ vm.orderInfo.customer.lastName }} {{ vm.orderInfo.customer.firstName }}</span></a></div><div class="drop" ng-class="{ show_js: vm.dropState[2] }"><div class="drop__i"><div class="passengerInvoiceInfo"><div class="passengerInvoiceInfo__i"><div class="row"><table><tbody><tr><td ng-if="vm.orderInfo.customer.phone"><p>{{ \'web.orderInfo.customer.phone\' | aliasStatic}} {{ vm.orderInfo.customer.phone }}</p></td><td ng-if="vm.orderInfo.customer.eMail"><p>{{ \'web.orderInfo.customer.eMail\' | aliasStatic}} {{ vm.orderInfo.customer.eMail }}</p></td></tr></tbody></table></div></div></div></div></div></div></div><div ng-if="vm.orderInfo.history.length" class="item dropWrapper" ng-class="{ active: vm.dropState[3] }"><div class="item__i"><div class="title"><a href="" ng-click="vm.dropState[3] = !vm.dropState[3]" class="openDrop"><span class="circle"><i class="icon_triangle"></i></span> {{ \'web.orderInfo.history\' | aliasStatic}}</a></div><div class="drop" ng-class="{ show_js: vm.dropState[3] }"><div class="drop__i"><div class="invoiceHistory"><div class="invoiceHistory__i"><table><tbody><tr ng-repeat="rec in vm.orderInfo.history"><td><strong>{{ rec.date }}</strong></td><td><p>{{ rec.type }}</p><p ng-if="rec.comment">{{ rec.comment }}</p></td><td class="col_amount"><p ng-if="rec.amount" ng-bind-html="{ value: rec.amount, currency: rec.currency } | price"></p></td></tr></tbody></table></div></div></div></div></div></div></div><div class="row"><div class="col"><div class="invoiceServicesSelected"><div class="invoiceServicesSelected__i"><h2 class="title">{{ \'web.orderInfo.extraServices\' | aliasStatic}}</h2><grouped-services-list order="vm.orderInfo" mode="all"></grouped-services-list></div></div><div ng-if="vm.orderInfo.addingExtraServicesAllowed" class="otherServices"><div class="otherServices__i"><h2 class="title">{{ \'web.orderInfo.addExtraServices\' | aliasStatic}}</h2><wrap ng-bind-html="\'web.orderInfo.addExtraServices.htmlItems\' | aliasStatic"></wrap><div class="btnRow"><a href="" ng-click="vm.openAddServices(vm.pnrOrTicketNumber, vm.lastName)" class="btn btn_select">{{ \'web.buttons.addServices\' | aliasStatic}}</a></div></div></div></div><a href="" name="invoiceHeader"></a><div class="col"><div class="invoiceTotal"><div class="invoiceTotal__i"><order-prices order="vm.orderInfo" mode="pricesIssued"></order-prices><order-ffp-prices summ="vm.orderInfo.ffpSumm" bonus="vm.ffpBonus"></order-ffp-prices><order-prices order="vm.orderInfo" mode="pricesNotIssued"></order-prices></div></div></div></div><div ng-if="vm.orderInfo.currencyToPay != vm.orderInfo.currency && vm.showPaymentFrame" class="currencyConvertWarning"><span ng-bind-html="\'web.messages.currencyConvertWarning\' | aliasStatic"></span> <span ng-bind-html="{ value: vm.orderInfo.amountToPay, currency: vm.orderInfo.currencyToPay } | price"></span></div><payment-frame ng-if="vm.showPaymentFrame" url="vm.orderInfo.paymentRedirectTo"></payment-frame><div ng-if="!vm.showPaymentFrame" class="btn-row"><ul><li ng-if="\'site.bookingEnabled\' | param"><a href="{{ \'web.site.firstStepUrl\' | aliasStatic }}" class="btn btn-new-booking">{{ \'web.buttons.newBooking\' | aliasStatic}}</a></li><li ng-if="!(\'site.bookingEnabled\' | param)"><a href="" ng-click="vm.clearSession()" class="btn btn-clear-session">{{ \'web.buttons.clearSession\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.cancellationAllowed"><a href="" fancybox="popupCancelOrder" class="btn">{{ \'web.orderInfo.actions.cancel\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.refundAllowed"><a href="" ng-click="vm.openRefund(vm.orderInfo.header.regnum, vm.orderInfo.header.lastName)" class="btn">{{ \'web.orderInfo.actions.refund\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.exchangeAllowed"><a href="" ng-click="vm.openExchange(vm.orderInfo.header.regnum, vm.orderInfo.header.lastName)" class="btn">{{ \'web.orderInfo.actions.exchange\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.retryRegisterAllowed"><a href="" ng-click="vm.retryPayment()" class="btn">{{ \'web.buttons.retryPay\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.paymentConfirmationAllowed"><a href="" fancybox="popupIssueTickets" class="btn">{{ \'web.buttons.issueTickets\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.bindAlowed"><a href="" ng-click="vm.bindOrder()" class="btn">{{ \'web.buttons.bindOrder\' | aliasStatic}}</a></li></ul></div><div ng-if="vm.showBindOrderSuccessMessage" class="infoMessage"><br><br><div class="infoMessage__i"><p ng-bind-html="\'web.messages.bindOrderSuccess\' | aliasStatic"></p></div></div><div ng-if="vm.showBindOrderFailMessage" class="infoMessage infoMessage_error"><br><br><div class="infoMessage__i"><p ng-bind-html="\'web.messages.bindOrderFail\' | aliasStatic"></p></div></div></div></div><wrap ng-if="!vm.loading"><popup-cancel-order></popup-cancel-order><popup-remark></popup-remark><popup-issue-tickets mode="vm.orderInfo.paymentform"></popup-issue-tickets><popup-removed-services-warning order="vm.orderInfo"></popup-removed-services-warning><popup-send-receipt></popup-send-receipt><popup-aeroexpress-refund></popup-aeroexpress-refund></wrap>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/popup-luggage-weight-info/popup-luggage-weight-info.html",'<div class="popup popup_luggage-weight-info" id="luggage-weight-info" style="display: none;"><div class="title"><div class="title__i"><p>{{ \'web.popupLuggageWeight.header\' | aliasStatic}}</p><a href="" ng-click="vm.close()" class="closePopup closePopup_js"></a></div></div><div class="popup__i"><div class="popup_luggage-weight-info"><div class="popup__content"><div ng-bind-html="\'web.popupLuggageWeight.content\' | aliasStatic"></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/popup-order-flight-detail/popup-order-flight-detail.html",'<div class="popup popup_detail" id="popupOrderFlightDetail" style="display: none;"><div class="title"><div class="title__i"><p>{{ \'web.popupOrderFlightDetail.header\' | aliasStatic}}</p><a href="" ng-click="vm.close()" class="closePopup closePopup_js"></a></div></div><div class="popup__i"><div class="popup_detail"><div ng-repeat="(segNum, segment) in vm.segmentsList" class="flight"><div class="route_item_container" ng-repeat="(flightNum, flight) in segment.flights"><div class="route_item"><div class="route__i route_container"><div class="route_table"><div class="dep"><div class="dep__date" ng-class="{ nextDay: flight.departuredayshift, attention: flight.departuredayshift}">{{ flight.departuredate | formatDate: \'D MMM, dd\' }}</div><div class="dep__time">{{ flight.departuretime }}</div><geo-marker prefix="dep__point" key="popup-order-flight-detail" city="flight.origincity" cityname="flight.origincityName" port="flight.originport" portname="flight.originportName"></geo-marker></div><div class="info"><i class="icon_plane"></i><div class="info__number">{{ flight.company.code || flight.company.code_en }}-{{ flight.racenumber }}</div><div class="info__timeEnRoute">{{ flight.flighttime | timeAsWords }}</div></div><div class="arr"><div class="arr__date" ng-class="{ nextDay: flight.arrivaldayshift, attention: flight.arrivaldayshift}">{{ flight.arrivaldate | formatDate: \'D MMM, dd\' }}</div><div class="arr__time">{{ flight.arrivaltime }}</div><geo-marker prefix="arr__point" key="popup-order-flight-detail" city="flight.destinationcity" cityname="flight.destinationcityName" port="flight.destinationport" portname="flight.destinationportName"></geo-marker></div></div></div><div class="route__i additional"><span class="additional__company">{{ \'web.choosenFlight.company\' | aliasStatic}} {{ flight.company.name }}</span> <span class="additional__company" ng-if="flight.operatingCompany">{{ \'web.search.results.operatingCompany\' | aliasStatic}} {{ flight.operatingCompany.name }}</span> <span class="additional__plane">{{ flight.airplaneName }}</span></div></div><div ng-if="segment.connections[flightNum]" ng-init="connection=segment.connections[flightNum]" class="transfer"><span class="transfer__text"><strong>{{ \'web.choosenFlight.connection\' | aliasStatic}} {{ connection.time | timeAsWords }}</strong></span> <span ng-if="connection.previousAirport && connection.nextAirport && connection.previousAirport != connection.nextAirport" class="terminalChange">{{ \'web.choosenFlight.airportChange\' | aliasStatic}} (<span class="terminalName">{{ connection.previousAirport }}</span> <span class="terminalName">{{ connection.nextAirport }}</span>)</span> <span ng-if="connection.previousAirport == connection.nextAirport && connection.previousTerminal && connection.nextTerminal && connection.previousTerminal != connection.nextTerminal" class="terminalChange">{{ \'web.choosenFlight.terminalChange\' | aliasStatic}} (<span class="terminalName">{{ connection.previousTerminal }}</span> <span class="terminalName">{{ connection.nextTerminal }}</span>)</span></div><div ng-repeat="landing in flight.landings" class="landing"><span class="landing__text"><strong>{{ \'web.searchScheduleResult.landing\' | aliasStatic}}</strong></span><p class="landing__airport">{{ landing.landingCityName }} ({{ landing.landingTime | timeAsWords }})</p></div></div><div ng-if="segment.flights.length > 1" class="timeEnRoute">{{ \'web.choosenFlight.flighttime\' | aliasStatic}} {{ segment.flightTime | timeAsWords }}</div><div ng-if="segment.flights[0].brandName" class="tariff"><div class="tariff__include">{{ \'web.choosenFlight.tariffIncludeStart\' | aliasStatic}} {{ segment.flights[0].brandName }}</div></div><div class="rsln-choosenFlight__selected__flight__fare__features" ng-if="$root.getBrandProps(segment.flights[0].brand) && $root.getBrandProps(segment.flights[0].brand).length > 0"><div class="rsln-choosenFlight__selected__flight__fare__features__item" ng-repeat="(propNum, prop) in $root.getBrandProps(segment.flights[0].brand)" ng-if="prop.shortDesc"><span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_free" ng-if="prop.available == \'yes\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_paid" ng-if="prop.available == \'paid\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_no" ng-if="prop.available == \'no\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__content" ng-bind-html="prop.shortDesc"></span></div></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/popup-seat/popup-seat.html",'<div class="popup popup_selectSeat" id="popupSeat" style="display: none;"><div class="title"><div class="title__i"><p>{{ \'web.popupSeat.header\' | aliasStatic}}</p><a href="" ng-click="vm.close()" class="closePopup closePopup_js"></a></div></div><div class="seatSlider"><a href="" class="prev"></a> <a href="" class="next"></a><div class="seatSlider__i slick-initialized slick-slider"><div class="slick-list draggable"><div class="slick-track" role="listbox"><div class="item slick-slide slick-cloned"><div class="itemTitle"><div class="itemTitle__i"><p><geo-marker prefix="dep__point" key="popup-seat" city="vm.orderInfo.plainFlights[vm.selectedFlight].origincity" cityname="vm.orderInfo.plainFlights[vm.selectedFlight].origincityName" port="vm.orderInfo.plainFlights[vm.selectedFlight].originport" portname="vm.orderInfo.plainFlights[vm.selectedFlight].originportName"></geo-marker><geo-marker prefix="arr__point" key="popup-seat" city="vm.orderInfo.plainFlights[vm.selectedFlight].destinationcity" cityname="vm.orderInfo.plainFlights[vm.selectedFlight].destinationcityName" port="vm.orderInfo.plainFlights[vm.selectedFlight].destinationport" portname="vm.orderInfo.plainFlights[vm.selectedFlight].destinationportName"></geo-marker></p><p>{{ vm.orderInfo.passengers[vm.selectedPassenger].lastName }} {{ vm.orderInfo.passengers[vm.selectedPassenger].firstName }}</p></div></div><div class="seatSelect"><div class="info"><div class="info__i"><p class="plane">{{ vm.orderInfo.plainFlights[vm.selectedFlight].airplaneName || vm.orderInfo.plainFlights[vm.selectedFlight].airplane }}</p><p class="sun">{{ vm.sunInfo }}</p><div ng-if="!vm.loadingSeatMap && vm.seatMap" class="seatInfo"><ul><li class="free"><span></span> {{ \'web.extraServices.seat.free\' | aliasStatic}}</li><li class="selected"><span></span> {{ \'web.extraServices.seat.selected\' | aliasStatic}}</li><li class="selectedByOrderPassenger" ng-if="vm.availablePassengersCount > 1"><span></span> {{ \'web.extraServices.seat.selectedByOrderPassenger\' | aliasStatic}}</li><li class="disabled"><span></span> {{ \'web.extraServices.seat.disabled\' | aliasStatic}}</li><li ng-if="vm.seatMap.hasAutoAssignedSeat && vm.seatMap.hasFreeAndAutoAssignedSeat" class="seat-auto-assigned"><span></span> {{ \'web.extraServices.seat.freeAndAutoAssignedSeat\' | aliasStatic}}</li><li ng-if="vm.seatMap.hasAutoAssignedSeat && !vm.seatMap.hasFreeAndAutoAssignedSeat" class="seat-auto-assigned"><span></span> {{ \'web.extraServices.seat.autoAssignedSeat\' | aliasStatic}}</li><li ng-repeat="svc in vm.seatMap.svcs track by $index" class="rfiscs-seat-label"><span class="color-marker seat-rfisc-{{ svc.rfisc }} seat-map-color-group-{{ svc.index }}"></span> <span class="rfiscs-seat-label-cost" ng-bind-html="{ value: svc.cost, currency: svc.currency } | price"></span> <span ng-if="\'extraServices.showSeatMapLegendTitleLabel\' | param" class="rfiscs-seat-label-title">{{ svc.title }}</span> <span ng-if="\'extraServices.showSeatMapLegendDescriptionLabel\' | param" class="rfiscs-seat-label-description" ng-bind-html="svc.description | aliasDynamic"></span></li><wrap ng-if="vm.hasAlias(\'web.extraServices.seat.customLabels\')" ng-bind-html="\'web.extraServices.seat.customLabels\' | aliasStatic"></wrap></ul><div class="rsln-seat-additional-info" ng-bind-html="\'web.extraservices.seat.additionalInfo\' | aliasStatic"></div></div></div></div><seat-map ng-if="vm.seatMap" map="vm.seatMap" passenger="vm.selectedPassenger" flight="vm.selectedFlight" selected="vm.selectedSeatsByPassengerSegments" issued="vm.issuedSeatsByPassengerSegments" locked="vm.locked" set="vm.setPassengerFlightSeat"></seat-map><div class="btnRow"><a href="" ng-if="vm.selectedSeatsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight]" ng-click="vm.close(); vm.removePassengerFlightSeat(vm.selectedPassenger, vm.selectedFlight);" class="btn btn_ready closePopup_js">{{ \'web.popupSeat.clear\' | aliasStatic}}</a> <a href="" ng-click="vm.close()" class="btn btn_ready closePopup_js">{{ \'web.popupSeat.ok\' | aliasStatic}}</a></div></div></div></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/search-form/search-form.html",'<div class="searchParams" ng-class="{ active:vm.formOpened }"><div class="wrap"><div ng-if="vm.searchResultError || vm.nearestDates" class="orderSearchError"><div class="orderSearchError__i"><p ng-if="!vm.nearestDates">{{ vm.searchResultError | alias }}</p><wrap ng-if="vm.nearestDates"><p>{{ \'web.messages.nearestDates\' | alias }}</p><p ng-repeat="nearestDateSeg in vm.nearestDates"><wrap ng-if="!nearestDateSeg.segId"><geo-marker-wrapper prefix="dep__point" key="search-form" cityinfo="vm.originCity"></geo-marker-wrapper><geo-marker-wrapper prefix="arr__point" key="search-form" cityinfo="vm.destinationCity"></geo-marker-wrapper></wrap><wrap ng-if="nearestDateSeg.segId"><geo-marker-wrapper prefix="arr__point" key="search-form" cityinfo="vm.destinationCity"></geo-marker-wrapper><geo-marker-wrapper prefix="dep__point" key="search-form" cityinfo="vm.originCity"></geo-marker-wrapper></wrap>{{ \' \' }} <a ng-if="nearestDateSeg.earlierMatching" ng-click="vm.selectNearestDate(nearestDateSeg.segId, nearestDateSeg.earlierMatching)">{{ nearestDateSeg.earlierMatching }}</a> {{ \' \' }}<wrap ng-if="nearestDateSeg.earlierMatching && nearestDateSeg.laterMatching">{{ \'web.messages.nearestDatesWrapper\' | alias }}</wrap>{{ \' \' }} <a ng-if="nearestDateSeg.laterMatching" ng-click="vm.selectNearestDate(nearestDateSeg.segId, nearestDateSeg.laterMatching)">{{ nearestDateSeg.laterMatching }}</a></p></wrap><wrap ng-if="\'search.enableSchedule\' | param"><p>{{ \'web.searchForm.scheduleInvitationBegin\' | alias }}<geo-marker-wrapper prefix="dep__point" key="search-form" cityinfo="vm.originCity"></geo-marker-wrapper><geo-marker-wrapper prefix="arr__point" key="search-form" cityinfo="vm.destinationCity"></geo-marker-wrapper>{{ \'web.searchForm.scheduleInvitationEnd\' | alias }} <a href="./schedule?origin-city-code={{ ::vm.originCity.codeEn }}&destination-city-code={{ ::vm.destinationCity.codeEn }}">{{ \'web.searchForm.scheduleInvitationLink\' | alias }}</a></p></wrap></div></div><div class="searchParams__i rsln-searchParams_change" ng-click="vm.formOpened = !vm.formOpened;"><div class="info" ng-show="!vm.formOpened"><ul><li ng-show="vm.originCity && vm.destinationCity"><geo-marker-wrapper prefix="dep__point" key="search-form" cityinfo="vm.originCity"></geo-marker-wrapper><geo-marker-wrapper prefix="arr__point" key="search-form" cityinfo="vm.destinationCity"></geo-marker-wrapper></li><li ng-show="vm.segCount == 2">{{ \'web.searchForm.roundtrip\' | alias }}</li><li ng-show="vm.segCount == 1">{{ \'web.searchForm.oneway\' | alias }}</li><li>{{ vm.getDescPassCountStr() }}</li></ul></div><a href="" ng-show="vm.showSwitch" class="changeParams"><span class="show">{{ \'web.searchForm.show\' | alias }}</span> <span class="hide">{{ \'web.searchForm.hide\' | alias }}</span></a></div><div class="orderSearchForm orderSearchForm_change rsln-searchForm" style="display: block;" ng-show="vm.formOpened"><div class="orderSearchForm__i"><div class="formBody"><form name="vm.searchForm" form-submit-error-highlight="" novalidate="" class="formBody__i" method="post" autocomplete="off"><div class="formBodyItem"><div class="steps active"><div class="steps__i"><div class="item item_transfer"><div class="item__i"><city-picker role="origin" pickerindex="1" selected="vm.originCity" exclude="vm.destinationCity.codeEn" touched="vm.submitTouched" placeholder="{{ \'web.searchForm.originCity\' | alias }}"></city-picker><city-picker role="destination" pickerindex="2" selected="vm.destinationCity" depend="vm.originCity.codeEn" touched="vm.submitTouched" placeholder="{{ \'web.searchForm.destinationCity\' | alias }}"></city-picker><div ng-click="vm.switchCities()" class="rsln-searchForm__citySwap"></div></div></div><div class="item item_date" id="calendarContainer"><div class="item__i"><div class="col"><div class="pikaday__header_mobile" ng-class="{ active: vm.pikadayThereOpen }"><i class="icon_plane"></i> <span>{{ \'web.searchForm.thereDate\' | alias }}</span> <a href="" class="pikaday__header_mobile_close" ng-click="vm.pikadayClose(\'there\')"></a></div><div class="inp"><div class="inp__i"><error-message control="vm.searchForm.thereDate" touched="vm.submitTouched"></error-message><input type="text" tabindex="3" placeholder="{{ \'web.searchForm.thereDate\' | alias }}" class="textInp calendarInp calendarInp_js" ng-class="{ textInp_error:(vm.submitTouched && vm.searchForm.thereDate.$invalid) }" pikaday="vm.pikadayThere" container="calendarContainer" number-of-months="{{ vm.viewMonthCount }}" on-open="vm.pikadayOpen(\'there\'); vm.pikadayThereOpen = true;" on-select="vm.pikadayThereSelectHandler()" on-close="vm.pikadayThereOpen = false" on-draw="vm.pikadayThereDraw()" name="thereDate" ng-model="vm.thereDate" id="book_from" readonly="" required=""> <label class="calendarIcon" for="book_from"></label></div></div></div><div class="col"><div class="pikaday__header_mobile" ng-class="{ active: vm.pikadayBackOpen }"><i class="icon_plane icon_plane_back"></i> <span>{{ \'web.searchForm.backDate\' | aliasStatic}}</span> <a href="" class="pikaday__header_mobile_close" ng-click="vm.pikadayClose(\'back\')"></a></div><div class="inp" ng-class="{ locked:vm.segCount != 2 }"><div class="inp__i"><a href="" class="locked-lnk" ng-click="vm.unlockBackDate()"></a> <input type="text" tabindex="4" placeholder="{{ \'web.searchForm.backDate\' | aliasStatic}}" class="textInp calendarInp calendarInp_js" pikaday="vm.pikadayBack" container="calendarContainer" number-of-months="{{ vm.viewMonthCount }}" on-open="vm.pikadayOpen(\'back\'); vm.pikadayBackOpen = true;" on-close="vm.pikadayBackOpen = false" on-draw="vm.pikadayBackDraw()" name="backDate" ng-model="vm.backDate" id="book_to" readonly=""> <label class="calendarIcon" for="book_to"></label></div></div><div class="pikaday__clear__back" ng-show="vm.backDate" ng-click="vm.segCount = 1; $scope.$apply(); vm.pikadayBack.setDate(null); vm.pikadayBack.hide(); vm.pikadayThere.setEndRange(null); vm.pikadayBack.setEndRange(null);"></div></div></div></div><div class="item item_peoples"><div class="item__i"><div class="compactPeopleInfo compactShow" ng-click="vm.compactPassCountOpened = !vm.compactPassCountOpened;"><div class="compactPeopleInfo__inner"></div><a href="" class="compactDropShow compactDropShow_js" ng-class="{ \'open\': vm.compactPassCountOpened }"><input type="text" value="{{ vm.getTotalPassCountStr() }}" class="textInp" readonly=""><div class="arrowDown rsln-searchForm__arrowDown"></div></a></div><div class="compactDrop" ng-class="{ active:vm.compactPassCountOpened }"><pass-picker role="countBase" selected="vm.countBase" base="vm.basePassengerCategory"></pass-picker><pass-picker role="countRBG" selected="vm.countRBG"></pass-picker><pass-picker role="countRMG" selected="vm.countRMG"></pass-picker><pass-picker role="countRVG" selected="vm.countRVG"></pass-picker></div></div></div><div class="item item_btn"><button ng-click="vm.searchButtonClick()" class="btn btn_search btn_formSearch btn_formSearch_js">{{ \'web.searchForm.submit\' | alias }}</button></div></div></div></div></form></div></div></div><div ng-if="vm.ffpLoginError" class="orderSearchError"><div class="orderSearchError__i"><p>{{ \'web.messages.ffpLoginError.header\' | alias }}</p><p>{{ \'web.messages.ffpLoginError.start\' | alias }} <a href="" ng-click="vm.deactivateFFP(); vm.searchButtonClick();">{{ \'web.messages.ffpLoginError.link\' | alias }}</a> {{ \'web.messages.ffpLoginError.end\' | alias }}</p></div></div></div></div>');
}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/search-mono-brand-cartesian-variants/search-mono-brand-cartesian-variants.html",'<div class="rsln-bg"></div><div ng-repeat="(segNum, segment) in vm.searchParams.segments" class="chooseFlight"><div class="chooseFlight__i"><div class="rsln-way"><div class="rsln-way__header" data-segment="segment_{{ segNum }}"><span class="rsln-way__header__caption" ng-if="vm.searchParams.segments.length > 1">{{"web.searchResult.segmentLabel." + segNum | alias }}:</span> <span class="rsln-way__header__date">{{ vm.searchParams.segments[segNum].date | formatDate: \'D MMMM\' }},</span> <span><geo-marker-wrapper prefix="flightWay__point_origin" key="search-mono-brand-cartesian-variants" cityinfo="segment.origin"></geo-marker-wrapper></span>  <span><geo-marker-wrapper prefix="flightWay__point_destination" key="search-mono-brand-cartesian-variants" cityinfo="segment.destination"></geo-marker-wrapper></span></div></div><div ng-if="vm.searchResultPeriod.segmentsCalendar" class="rsln-chooseDate"><a href="" class="rsln-chooseDate__arrow rsln-chooseDate__arrow_prev" ng-click="vm.resetDate(segNum, false, -7)" ng-class="{ \'rsln-chooseDate__arrow_disabled\': !vm.checkResetDate(segNum, false, -7) }"></a><div class="rsln-chooseDate__date weekday_{{ cell.date | formatDate: \'E\'}}" ng-repeat="cell in vm.searchResultPeriod.segmentsCalendar[segNum]" ng-click="vm.resetDate(segNum, cell.date)" ng-class="{ active:(cell.date == segment.date), disabled: !vm.checkResetDate(segNum, cell.date) || (!cell.summ && !vm.loadingPeriodVariants)}"><div class="rsln-chooseDate__date__date">{{ cell.date | formatDate: \'D\'}}</div><div class="rsln-chooseDate__date__month">{{ vm.getMonthShortName( cell.date | formatDate: \'MMMM\' ) }}</div><div class="rsln-chooseDate__date__DOW">{{ cell.date | formatDate: \'dd\'}}</div><div class="rsln-chooseDate__date__price"><span class="loading" ng-show="vm.loadingPeriodVariants"></span><wrap ng-if="cell.summ && !vm.loadingPeriodVariants"><span ng-hide="vm.loadingPeriodVariants">{{ \'web.search.monobrand.from\' | alias}}</span> <span ng-bind-html="{ value: cell.summ, currency: cell.currency } | price"></span></wrap><wrap ng-if="!cell.summ && !vm.loadingPeriodVariants"><span>{{ \'web.search.monobrand.noplaces\' | alias}}</span></wrap></div></div><a ng-click="vm.resetDate(segNum, false, 7)" class="rsln-chooseDate__arrow rsln-chooseDate__arrow_next" ng-class="{ \'rsln-chooseDate__arrow_disabled\': !vm.checkResetDate(segNum, false, 7) }" href=""></a></div><div class="rsln-flightTable__wrp"><div class="rsln-flightTable__sorting-wrp" ng-if="vm.searchResult"><flights-sorting segment="vm.searchResult.segmentRows[segNum]"></flights-sorting></div><div class="rsln-flightTable" ng-if="vm.searchResult"><div class="rsln-flightTable__row rsln-flightTable__row_headrow"><div class="rsln-flightTable__flightsHeader rsln-flightTable__cell">{{ \'web.search.monobrand.flights\' | alias}}</div><div class="rsln-flightTable__fareHeader rsln-flightTable__cell" ng-repeat="(brandNum, brand) in vm.searchResult.brandsList" ng-class="{ control_disabled: (segNum == 1 && !vm.searchResult.brandsCompatibleState[brandNum]) }"><span class="rsln-flightTable__fareHeader__title"><span ng-if="backend.sessionParams.lang == \'ru\'"></span>{{ brand.name }}<span ng-if="backend.sessionParams.lang == \'ru\'"></span></span><div ng-if="brand.theBest" class="rsln-flightTable__fareHeader_best">{{ \'web.searchResult.brandTheBest\' | alias }}</div></div></div><div class="rsln-flightTable__row rsln-flightTable__row__flight_{{rowNum}}" ng-repeat="(rowNum, row) in vm.searchResult.segmentRows[segNum]" ng-if="row.isDirectFlight" ng-class="{ \'rsln-flightTable__row_flightSelected\': vm.isSelectedPrice(segNum, rowNum), \'detailOpen\': vm.showDetail(segNum, rowNum)}"><div class="rsln-flightTable__flightInfo rsln-flightTable__cell" ng-class="{ \'rsln-flightTable__flightInfo_flightSelected\': vm.isSelectedPrice(segNum, rowNum)}"><div class="rsln-flightTable__flightInfo__shortInfo" ng-class="{ \'detailOpen\': vm.showDetail(segNum, rowNum)}" ng-click="vm.setDropState(segNum, rowNum, !vm.showDetail(segNum, rowNum));"><div class="rsln-flightTable__flightInfo__shortInfo__departure"><div class="rsln-flightTable__flightInfo__shortInfo__departure__time">{{ row.flightsInfo.departuretime }}</div><div class="rsln-flightTable__flightInfo__shortInfo__departure__IATA">{{ row.flightsInfo.originport || row.flightsInfo.origincity }}</div></div><div class="rsln-flightTable__flightInfo__shortInfo__transfers">{{ row.flightsInfo.connectionsMessage }}<span ng-if="row.flightsInfo.connections && row.flightsInfo.connections.length == 1">({{ row.flightsInfo.connections[0].nextAirport || row.flightsInfo.connections[0].city }})</span></div><div class="rsln-flightTable__flightInfo__shortInfo__minPrice">{{ \'web.search.monobrand.from\' | alias}} <span class="rsln-flightTable__flightInfo__shortInfo__minPrice__price" ng-bind-html="{ value: row.minPrice, currency: row.minPriceCurrency } | price"></span></div><div class="rsln-flightTable__flightInfo__shortInfo__timeEnRoute">{{ row.flightsInfo.flighttime | timeAsWords }}</div><div class="rsln-flightTable__flightInfo__shortInfo__arrival"><div class="rsln-flightTable__flightInfo__shortInfo__arrival__time">{{ row.flightsInfo.arrivaltime }}</div><div class="rsln-flightTable__flightInfo__shortInfo__arrival__IATA">{{ row.flightsInfo.destinationport || row.flightsInfo.destinationcity }}</div></div></div><div class="rsln-flightTable__flightRoute" ng-if="vm.showDetail(segNum, rowNum)"><wrap ng-repeat="(flightNum, flight) in row.flights" ng-init="flightCompany = flight.operatingCompany || flight.company"><div class="rsln-flightTable__flightRoute__header"><div class="rsln-flightTable__flightRoute__header__logo"><img class="rsln-flightTable__flightRoute__header__logo__image" ng-src="/resources/oxygen/logo-{{ flightCompany.code }}.svg" alt="Rusline Logo"></div><div class="rsln-flightTable__flightRoute__header__flight"><div class="rsln-flightTable__flightRoute__header__flight__title">{{ \'web.search.monobrand.flight\' | alias }}</div><div class="rsln-flightTable__flightRoute__header__flight__value">{{ flight.carrier + \'-\' + flight.racenumber }}</div></div><div class="rsln-flightTable__flightRoute__header__aircraft"><div class="rsln-flightTable__flightRoute__header__aircraft__title">{{ \'web.search.monobrand.aircraft\' | alias }}</div><div class="rsln-flightTable__flightRoute__header__aircraft__value">{{ flight.airplane | airplaneRename }}</div></div></div><div class="rsln-flightTable__flightRoute__subHeader" ng-if="flightNum == 0"><div class="rsln-flightTable__flightRoute__subHeader__item">{{ \'web.search.monobrand.departure\' | alias}}</div><div class="rsln-flightTable__flightRoute__subHeader__item">{{ \'web.search.monobrand.arrival\' | alias}}</div></div><div class="rsln-flightTable__flightRoute__segment"><div class="rsln-flightTable__flightRoute__segment__departure"><div class="rsln-flightTable__flightRoute__segment__departure__time">{{ flight.departuretime }}</div><div class="rsln-flightTable__flightRoute__segment__departure__place">{{ flight.origincityName }}<span ng-if="flight.originportName">, {{ flight.originportName }}</span></div></div><div class="rsln-flightTable__flightRoute__segment__arrival"><div class="rsln-flightTable__flightRoute__segment__arrival__time">{{ flight.arrivaltime }}</div><div class="rsln-flightTable__flightRoute__segment__arrival__place">{{ flight.destinationcityName }}<span ng-if="flight.destinationportName">, {{ flight.destinationportName }}</span></div></div></div><div ng-if="row.flightsInfo.connections[flightNum]" ng-init="connection=row.flightsInfo.connections[flightNum]" class="rsln-flightTable__flightRoute__transfer"><span class="rsln-flightTable__flightRoute__transfer__caption">{{ \'web.choosenFlight.connection\' | alias }}</span> <span class="rsln-flightTable__flightRoute__transfer__time">{{ connection.time | timeAsWords}}</span></div><div ng-repeat="landing in flight.landings" class="rsln-flightTable__flightRoute__landing"><span class="rsln-flightTable__flightRoute__landing__caption">{{ \'web.searchScheduleResult.landing\' | alias }}</span> <span class="rsln-flightTable__flightRoute__landing__time">{{ landing.landingCityName }} ({{ landing.landingTime | timeAsWords }})</span></div></wrap></div></div><div class="rsln-flightTable__fareForFlight rsln-flightTable__cell" ng-repeat="(priceNum, priceItem) in row.prices track by $index" ng-class="{ \'rsln-flightTable__fareForFlight_fareSelected\': priceItem.selected ,\'rsln-flightTable__fareForFlight_flightSelected\': vm.isSelectedPrice(segNum, rowNum)}"><div class="rsln-flightTable__fareForFlight__short" ng-class="{ control_disabled: (segNum == 1 && !vm.searchResult.brandsCompatibleState[priceNum]) || priceItem.comparedDateTimeDisable }" ng-click="vm.selectVariant(segNum, rowNum, priceNum); vm.setDropState(segNum, rowNum, true);" ng-if="priceItem" data-popup-alias="web.extraServicesRules.baggage"><div class="rsln-flightTable__fareForFlight__short__adaptiveFareName">{{ vm.searchResult.brandsList[priceNum].name }}</div><wrap class="rsln-flightTable__fareForFlight__short__price" ng-bind-html="{ value: priceItem.price, currency: priceItem.currency } | price"></wrap></div><div class="rsln-flightTable__fareForFlight__noSeats_adaptiveFareName" ng-if="!priceItem">{{ vm.searchResult.brandsList[priceNum].name }}</div><div class="rsln-flightTable__fareForFlight__noSeats" ng-if="!priceItem"><span>{{ \'web.search.monobrand.sales\' | alias}}</span></div><div class="rsln-flightTable__fareForFlight__compare" ng-if="vm.showDetail(segNum, rowNum) && priceItem"><div class="rsln-flightTable__fareForFlight__compare__item tooltipster-wrap" ng-repeat="(propsNum, propsItem) in vm.searchResult.brandsList[priceNum].props track by $index"><span class="rsln-flightTable__fareForFlight__compare__item__icon rsln-flightTable__fareForFlight__compare__item__icon_free" ng-if="propsItem.available == \'yes\'"></span> <span class="rsln-flightTable__fareForFlight__compare__item__icon rsln-flightTable__fareForFlight__compare__item__icon_paid" ng-if="propsItem.available == \'paid\'"></span> <span class="rsln-flightTable__fareForFlight__compare__item__icon rsln-flightTable__fareForFlight__compare__item__icon_no" ng-if="propsItem.available == \'no\'"></span> <span class="rsln-flightTable__fareForFlight__compare__item__name" ng-bind-html="propsItem.name"></span> <span class="tooltipster-content" ng-if="propsItem.shortDesc"><span class="tooltipster-text">{{ propsItem.shortDesc }}</span></span></div></div></div><div class="rsln-flightTable__flightRoute rsln-flightTable__flightRoute_adaptive" ng-if="vm.showDetail(segNum, rowNum)"><wrap ng-repeat="(flightNum, flight) in row.flights" ng-init="flightCompany = flight.operatingCompany || flight.company"><div class="rsln-flightTable__flightRoute__header"><div class="rsln-flightTable__flightRoute__header__logo"><img class="rsln-flightTable__flightRoute__header__logo__image" ng-src="/resources/oxygen/logo-{{ flightCompany.code }}.svg" alt="Rusline Logo"></div><div class="rsln-flightTable__flightRoute__header__flight"><div class="rsln-flightTable__flightRoute__header__flight__title">{{ \'web.search.monobrand.flight\' | alias }}</div><div class="rsln-flightTable__flightRoute__header__flight__value">{{ flight.carrier + \'-\' + flight.racenumber }}</div></div><div class="rsln-flightTable__flightRoute__header__aircraft"><div class="rsln-flightTable__flightRoute__header__aircraft__title">{{ \'web.search.monobrand.aircraft\' | alias }}</div><div class="rsln-flightTable__flightRoute__header__aircraft__value">{{ flight.airplane | airplaneRename }}</div></div></div><div class="rsln-flightTable__flightRoute__subHeader" ng-if="flightNum == 0"><div class="rsln-flightTable__flightRoute__subHeader__item">{{ \'web.search.monobrand.departure\' | alias}}</div><div class="rsln-flightTable__flightRoute__subHeader__item">{{ \'web.search.monobrand.arrival\' | alias}}</div></div><div class="rsln-flightTable__flightRoute__segment"><div class="rsln-flightTable__flightRoute__segment__departure"><div class="rsln-flightTable__flightRoute__segment__departure__time">{{ flight.departuretime }}</div><div class="rsln-flightTable__flightRoute__segment__departure__place">{{ flight.origincityName }}<span ng-if="flight.originportName">, {{ flight.originportName }}</span></div></div><div class="rsln-flightTable__flightRoute__segment__arrival"><div class="rsln-flightTable__flightRoute__segment__arrival__time">{{ flight.arrivaltime }}</div><div class="rsln-flightTable__flightRoute__segment__arrival__place">{{ flight.destinationcityName }}<span ng-if="flight.destinationportName">, {{ flight.destinationportName }}</span></div></div></div><div ng-if="row.flightsInfo.connections[flightNum]" ng-init="connection=row.flightsInfo.connections[flightNum]" class="rsln-flightTable__flightRoute__transfer"><span class="rsln-flightTable__flightRoute__transfer__caption">{{ \'web.choosenFlight.connection\' | alias }}</span> <span class="rsln-flightTable__flightRoute__transfer__time">{{ connection.time | timeAsWords}}</span></div><div ng-repeat="landing in flight.landings" class="rsln-flightTable__flightRoute__landing"><span class="rsln-flightTable__flightRoute__landing__caption">{{ \'web.searchScheduleResult.landing\' | alias }}</span> <span class="rsln-flightTable__flightRoute__landing__time">{{ landing.landingCityName }} ({{ landing.landingTime | timeAsWords }})</span></div></wrap></div></div></div></div></div></div><popup-flight-detail detail="vm.flightDetail"></popup-flight-detail><popup-airplane-info></popup-airplane-info>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/selected-variant/selected-variant.html",'<div ng-if="vm.pricingVariant" class="rsln-choosenFlight"><div class="rsln-choosenFlight__selected"><div class="rsln-choosenFlight__selected__header">{{ \'web.choosenFlight.header\' | alias }}</div><div class="rsln-choosenFlight__selected__flights"><div class="rsln-choosenFlight__selected__flight" ng-repeat="(segNum, segment) in vm.selectedVariantsInfo"><div class="rsln-choosenFlight__selected__flight__header"><span class="rsln-choosenFlight__selected__flight__header__text" ng-if="vm.selectedVariantsInfo.length > 1">{{"web.searchResult.segmentLabel." + segNum | alias }}:</span> <span class="rsln-choosenFlight__selected__flight__header__date">{{ segment.flightsInfo.departuredate | formatDate: \'D MMMM\' }},</span> <span class="rsln-choosenFlight__selected__flight__header__departure"><geo-marker prefix="dep__point" key="selected-variant" city="segment.flightsInfo.origincity" cityname="segment.flightsInfo.origincityName" port="segment.flightsInfo.originport" portname="segment.flightsInfo.originportName"></geo-marker></span> <span class="rsln-choosenFlight__selected__flight__header__date">{{ segment.flightsInfo.arrivaldate | formatDate: \'D MMMM\' }},</span> <span class="rsln-choosenFlight__selected__flight__header__arrival"><geo-marker prefix="dep__point" key="selected-variant" city="segment.flightsInfo.destinationcity" cityname="segment.flightsInfo.destinationcityName" port="segment.flightsInfo.destinationport" portname="segment.flightsInfo.destinationportName"></geo-marker></span><div class="rsln-choosenFlight__selected__flight__header__localTime">{{ \'web.searchResult.localTimeMessage\' | alias }}</div></div><a name="selected-variant"></a><div class="rsln-choosenFlight__selected__flight__wrap"><div class="rsln-choosenFlight__selected__flight__passengers"><span class="rsln-choosenFlight__selected__flight__passengers__type" ng-repeat="(pasNum, pasData) in vm.pricingVariant.passengerCategories">{{ pasData.passengerCountLabel }}</span></div><div class="rsln-choosenFlight__selected__flight__route"><div class="rsln-choosenFlight__selected__flight__route__departure"><div class="rsln-choosenFlight__selected__flight__route__departure__time">{{ segment.flightsInfo.departuretime }}</div><div class="rsln-choosenFlight__selected__flight__route__departure__IATA">{{ segment.flightsInfo.originport || segment.flightsInfo.origincity }}</div></div><div class="rsln-choosenFlight__selected__flight__route__passengers">{{ vm.getTotalCountPass() }}</div><div class="rsln-choosenFlight__selected__flight__route__price"><wrap ng-bind-html="{ value: segment.price, currency: vm.pricingVariant.currency } | price"></wrap></div><div class="rsln-choosenFlight__selected__flight__route__transfers">{{ segment.flightsInfo.connectionsMessage }}</div><div class="rsln-choosenFlight__selected__flight__route__timeEnRoute">{{ segment.flightsInfo.flighttime | timeAsWords }}</div><div class="rsln-choosenFlight__selected__flight__route__arrival"><div class="rsln-choosenFlight__selected__flight__route__arrival__time">{{ segment.flightsInfo.arrivaltime }}</div><div class="rsln-choosenFlight__selected__flight__route__arrival__IATA">{{ segment.flightsInfo.destinationport || segment.flightsInfo.destinationcity }}</div></div><div class="rsln-choosenFlight__selected__flight__route__comment" ng-init="originCity=vm.selectedVariantsInfo[0].flightsInfo.origincity; destCity=vm.selectedVariantsInfo[0].flightsInfo.destinationcity"><wrap ng-if="((originCity === \'NBC\' && destCity === \'MRV\') || (originCity === \'MVR\' && destCity === \'NBC\')) || (originCity === \'MOW\' && destCity === \'RIX\') || (originCity === \'RIX\' && destCity === \'MOW\')"><span class="rsln-choosenFlight__selected__flight__route__comment__fancybox-link"><i class="rsln-choosenFlight__selected__flight__route__comment__attention-icon"></i> {{ \'web.popupCompare.comment\' | alias }}</span></wrap></div><div class="rsln-choosenFlight__selected__flight__route__fullTransfers" ng-if="segment.flightsInfo.connections && segment.flightsInfo.connections.length > 0"><span class="rsln-choosenFlight__selected__flight__route__fullTransfers__caption">{{ \'web.selected.variant.transplantation\' | alias }}</span> <span ng-repeat="(connectionNum, connection) in segment.flightsInfo.connections">{{ connection.cityName }}<span ng-if="connection.nextAirportName">, {{ connection.nextAirportName }}</span> ({{ connection.time | timeAsWords}})</span></div><div class="rsln-choosenFlight__selected__flight__route__landings" ng-if="segment.flightsInfo.landings.length > 0"><span class="rsln-choosenFlight__selected__flight__route__fullTransfers__caption">{{ \'web.selected.variant.landings\' | alias}}</span> <span ng-repeat="(landingNum, landing) in segment.flightsInfo.landings">{{ landing.landingCityName }} ({{ landing.landingTime | timeAsWords}})</span></div></div><div class="rsln-choosenFlight__selected__flight__fare"><div class="rsln-choosenFlight__selected__flight__fare__header"><div class="rsln-choosenFlight__selected__flight__fare__link"><a href="" fancybox="popupRemark">{{ \'web.choosenFlight.remarkLink\' | alias }}</a></div><span class="rsln-choosenFlight__selected__flight__fare__header__caption">{{ \'web.selected.variant.rate\' | alias }}</span> <span ng-if="segment.brandName">{{segment.brandName}}</span> <span ng-if="vm.getFareCodesSegment(segNum).length > 0"><span class="rsln-choosenFlight__selected__flight__fare__header__caption">{{ \'web.selected.variant.code\' | alias }}</span> <span ng-repeat="(codeNum, code) in vm.getFareCodesSegment(segNum)"><span ng-if="codeNum >= 1">,</span> {{ code }}</span></span></div><div class="rsln-choosenFlight__selected__flight__fare__features" ng-if="$root.getBrandProps(segment.brand) && $root.getBrandProps(segment.brand).length > 0"><div class="rsln-choosenFlight__selected__flight__fare__features__item" ng-repeat="(propNum, prop) in $root.getBrandProps(segment.brand)" ng-if="prop.shortDesc"><span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_free" ng-if="prop.available == \'yes\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_paid" ng-if="prop.available == \'paid\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_no" ng-if="prop.available == \'no\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__content" ng-bind-html="prop.shortDesc"></span></div></div></div></div></div></div></div><div class="rsln-choosenFlight__payInfo"><div class="rsln-choosenFlight__payInfo__header">{{ \'web.selected.variant.ticketprice\' | alias }}</div><div class="rsln-choosenFlight__payInfo__details"><div class="rsln-choosenFlight__payInfo__details__priceParts"><div class="rsln-choosenFlight__payInfo__details__priceParts__item"><div class="rsln-choosenFlight__payInfo__details__priceParts__item__name">{{ \'web.choosenFlight.fare\' | alias }}</div><div class="rsln-choosenFlight__payInfo__details__priceParts__item__value"><span ng-bind-html="{ value: vm.pricingVariant.totalFare, currency: vm.pricingVariant.currency } | price"></span></div></div><div class="rsln-choosenFlight__payInfo__details__priceParts__item"><div class="rsln-choosenFlight__payInfo__details__priceParts__item__name">{{ \'web.choosenFlight.tax\' | alias }}</div><div class="rsln-choosenFlight__payInfo__details__priceParts__item__value"><span ng-bind-html="{ value: vm.pricingVariant.totalTax, currency: vm.pricingVariant.currency } | price"></span></div></div></div><div class="rsln-choosenFlight__payInfo__total"><div class="rsln-choosenFlight__payInfo__total__caption">{{ \'web.choosenFlight.totalPrice\' | alias }}</div><div class="rsln-choosenFlight__payInfo__total__amount"><span ng-bind-html="{ value: vm.pricingVariant.totalPrice, currency: vm.pricingVariant.currency } | price"></span></div></div></div><div class="searchResultsControl rsln-searchResultsControl rsln-searchResultsControl_selectedVariant" ng-if="vm.selectedVariantsInfo"><div class="searchResultsControl__i rsln-searchResultsControl__i"><a href="#{{$root.ROUTES.PASSENGERS}}" class="btn rsln-searchResultsControl__btn rsln-searchResultsControl__btn_selectedVariant" ng-if="vm.selectedVariantsInfo"><span>{{ \'web.buttons.next\' | alias }}</span></a></div></div></div></div><popup-remark></popup-remark><popup-luggage-weight-info></popup-luggage-weight-info>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("directives/flightsSorting/flights-sorting.html",'<div class="rsln-flights-sorting"><div class="rsln-flights-sorting__sort-by"><ui-select on-select="vm.handleSelect()" ng-model="vm.selectedSortingFilter" search-enabled="false" theme="selectize" name="flightsSortBy"><ui-select-match placeholder="{{ $select.selected.name }}">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="item in (vm.sortingVariants | filter: $select.search) track by item.value"><span ng-bind="item.name"></span></ui-select-choices></ui-select></div><div class="rsln-flights-sorting__only-direct-flights"><label class="rsln-flights-sorting__only-direct-label"><input type="checkbox" ng-change="vm.handleDirectCheckboxSwitch(vm.onlyDirect)" ng-model="vm.onlyDirect" class="rsln-flights-sorting__only-direct-input"> <span class="rsln-flights-sorting__custom-checkbox-wrp"><span class="rsln-flights-sorting__custom-checkbox" ng-class="{\'rsln-flights-sorting__custom-checkbox--active\': vm.onlyDirect}"></span> {{ \'web.sorting.direct\' | aliasStatic }}</span></label></div></div>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("screens/booking/booking.html",'<app-loader ng-if="vm.loading || vm.doBookingAndRegisterOrderLoading || vm.modifyServicesLoading || vm.orderServicesLoading"></app-loader><section class="out" ng-if="!vm.loading"><app-header></app-header><div class="searchSteps"><div class="wrap"><div class="searchSteps__i"><ol><li class="prev"><a href="{{ \'web.site.firstStepUrl\' | aliasStatic }}">{{ \'web.steps.search\' | aliasStatic}}</a></li><li class="prev"><a href="#{{$root.ROUTES.SEARCH}}">{{ \'web.steps.selectVariant\' | aliasStatic}}</a></li><li class="prev"><a href="#{{$root.ROUTES.PASSENGERS}}">{{ (vm.orderInfo.passengers.length == 1) ? ( \'web.steps.passenger\' | aliasStatic) : ( \'web.steps.passengers\' | aliasStatic) }}</a></li><li class="active">{{ \'web.steps.extraServices\' | aliasStatic}}</li><li>{{ \'web.steps.payment\' | aliasStatic}}</li><li>{{ \'web.steps.order\' | aliasStatic}}</li></ol></div></div></div><div class="content content-booking"><div class="wrap wrap_pt32"><div class="content__i"><div class="checkoutServices"><div class="checkoutServices__i"><h2 class="title">{{ \'web.extraServices.header\' | aliasStatic}}</h2><div ng-if="!vm.es" class="emptyServices">{{ \'web.extraServices.emptyServices\' | aliasStatic}}<br><br><br></div><div ng-if="vm.modifyServicesError" class="infoMessage infoMessage_error"><div class="infoMessage__i"><p ng-bind-html="vm.modifyServicesError | aliasDynamic"></p></div></div><extra-services-list ng-if="vm.es" es="vm.es" list="vm.esList" locked="vm.modifyServicesLoading || vm.orderServicesLoading"></extra-services-list></div></div><div class="choosenFlight choosenFlight_checkout"><div class="choosenFlight__i"><h2 class="title">{{ \'web.choosenFlight.header\' | aliasStatic}}</h2><div class="chooseResult"><div class="chooseResult__i"><div class="col"><div class="col__item"><div ng-repeat="(segNum, segment) in vm.orderInfo.flights" class="flight"><div class="route_item_container" ng-repeat="(flightNum, flight) in segment.flights"><div class="route_item"><div class="route__i route_container"><div class="route_table"><div class="dep"><div class="dep__date" ng-class="{ nextDay: flight.departuredayshift, attention: flight.departuredayshift}">{{ flight.departuredate | formatDate: \'D MMM, dd\' }}</div><div class="dep__time">{{ flight.departuretime }}</div><geo-marker prefix="dep__point" key="booking" city="flight.origincity" cityname="flight.origincityName" port="flight.originport" portname="flight.originportName"></geo-marker></div><div class="info"><i class="icon_plane"></i><div class="info__number">{{ flight.company.code_en }}-{{ flight.racenumber }}</div><div class="info__timeEnRoute">{{ flight.flighttime | timeAsWords }}</div></div><div class="arr"><div class="arr__date" ng-class="{ nextDay: flight.arrivaldayshift, attention: flight.arrivaldayshift}">{{ flight.arrivaldate | formatDate: \'D MMM, dd\' }}</div><div class="arr__time">{{ flight.arrivaltime }}</div><geo-marker prefix="arr__point" key="booking" city="flight.destinationcity" cityname="flight.destinationcityName" port="flight.destinationport" portname="flight.destinationportName"></geo-marker></div></div></div><div class="route__i additional"><span class="additional__company">{{ \'web.choosenFlight.company\' | aliasStatic}} {{ flight.company.name }}</span> <span class="additional__company" ng-if="flight.operatingCompany">{{ \'web.search.results.operatingCompany\' | aliasStatic}} {{ flight.operatingCompany.name }}</span> <span class="additional__plane">{{ flight.airplaneName }}</span></div></div><div ng-if="segment.connections[flightNum]" ng-init="connection=segment.connections[flightNum]" class="transfer"><span class="transfer__text"><strong>{{ \'web.choosenFlight.connection\' | aliasStatic}} {{ connection.time | timeAsWords }}</strong></span> <span ng-if="connection.previousAirport && connection.nextAirport && connection.previousAirport != connection.nextAirport" class="terminalChange">{{ \'web.choosenFlight.airportChange\' | aliasStatic}} (<span class="terminalName">{{ connection.previousAirport }}</span> <span class="terminalName">{{ connection.nextAirport }}</span>)</span> <span ng-if="connection.previousAirport == connection.nextAirport && connection.previousTerminal && connection.nextTerminal && connection.previousTerminal != connection.nextTerminal" class="terminalChange">{{ \'web.choosenFlight.terminalChange\' | aliasStatic}} (<span class="terminalName">{{ connection.previousTerminal }}</span> <span class="terminalName">{{ connection.nextTerminal }}</span>)</span></div><div ng-repeat="landing in flight.landings" class="landing"><span class="landing__text"><strong>{{ \'web.searchScheduleResult.landing\' | aliasStatic}}</strong></span><p class="landing__airport">{{ landing.landingCityName }} ({{ landing.landingTime | timeAsWords }})</p></div></div><div ng-if="segment.flights.length > 1" class="timeEnRoute">{{ \'web.choosenFlight.flighttime\' | aliasStatic}} {{ segment.flightTime | timeAsWords }}</div><div class="rsln-choosenFlight__selected__flight__fare__features" ng-if="$root.getBrandProps(segment.flights[0].brand) && $root.getBrandProps(segment.flights[0].brand).length > 0"><div class="rsln-choosenFlight__selected__flight__fare__features__item" ng-repeat="(propNum, prop) in $root.getBrandProps(segment.flights[0].brand)" ng-if="prop.shortDesc"><span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_free" ng-if="prop.available == \'yes\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_paid" ng-if="prop.available == \'paid\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__icon rsln-choosenFlight__selected__flight__fare__features__item__icon_no" ng-if="prop.available == \'no\'"></span> <span class="rsln-choosenFlight__selected__flight__fare__features__item__content" ng-bind-html="prop.shortDesc"></span></div></div></div></div></div><div class="col"><div class="col__item"><div class="col__i"><div class="passengers"><div class="item"><div class="item__i dropWrapper"><table><tbody><tr><td><p><strong>{{ vm.orderInfo.descPassCountStr }}</strong></p></td><td><strong ng-bind-html="{ value: vm.orderInfo.prices.totalTicket, currency: vm.orderInfo.prices.currency } | price"></strong></td></tr></tbody></table><div class="drop"><div class="drop__i"><table><tbody><tr><td>{{ \'web.choosenFlight.fare\' | aliasStatic}}</td><td ng-bind-html="{ value: vm.orderInfo.prices.totalFare, currency: vm.orderInfo.prices.currency } | price"></td></tr><tr ng-if="vm.orderInfo.prices.totalTax && !vm.orderInfo.prices.groupedTaxes" class="tax tax-all"><td>{{ \'web.choosenFlight.tax\' | aliasStatic}}</td><td ng-bind-html="{ value: vm.orderInfo.prices.totalTax, currency: vm.orderInfo.prices.currency } | price"></td></tr><tr ng-if="vm.orderInfo.prices.totalTax && vm.orderInfo.prices.groupedTaxes" ng-repeat="taxGroup in vm.orderInfo.prices.groupedTaxes" class="tax tax-grouped"><td>{{ \'web.choosenFlight.taxGroup.\' | aliasWithPrefix:taxGroup.code }}</td><td ng-bind-html="{ value: taxGroup.value, currency: vm.orderInfo.prices.currency } | price"></td></tr><tr ng-if="vm.orderInfo.prices.totalTax && vm.orderInfo.prices.otherTaxes" class="tax tax-other"><td>{{ \'web.choosenFlight.otherTaxes\' | aliasStatic}}</td><td ng-bind-html="{ value: vm.orderInfo.prices.otherTaxes, currency: vm.orderInfo.prices.currency } | price"></td></tr><tr ng-if="vm.orderInfo.pricesNotIssued.totalExtraServices"><td><strong>{{ \'web.choosenFlight.extraServices\' | aliasStatic}}</strong></td><td><strong ng-bind-html="{ value: vm.orderInfo.pricesNotIssued.totalExtraServices, currency: vm.orderInfo.prices.currency } | price"></strong></td></tr><tr ng-if="vm.orderInfo.pricesNotIssued.totalExtraServiceByGroup.seat"><td>{{ \'web.choosenFlight.totalSeat\' | aliasStatic}}</td><td ng-bind-html="{ value: vm.orderInfo.pricesNotIssued.totalExtraServiceByGroup.seat, currency: vm.orderInfo.prices.currency } | price"></td></tr><tr ng-if="vm.orderInfo.pricesNotIssued.totalExtraServiceByGroup.insurance"><td>{{ \'web.choosenFlight.totalInsurance\' | aliasStatic}}</td><td ng-bind-html="{ value: vm.orderInfo.pricesNotIssued.totalExtraServiceByGroup.insurance, currency: vm.orderInfo.prices.currency } | price"></td></tr><tr ng-if="vm.orderInfo.pricesNotIssued.totalExtraServiceByGroup.meal"><td>{{ \'web.choosenFlight.totalMeal\' | aliasStatic}}</td><td ng-bind-html="{ value: vm.orderInfo.pricesNotIssued.totalExtraServiceByGroup.meal, currency: vm.orderInfo.prices.currency } | price"></td></tr><tr ng-if="vm.orderInfo.pricesNotIssued.totalExtraServiceByGroup.baggage"><td>{{ \'web.choosenFlight.totalBaggage\' | aliasStatic}}</td><td ng-bind-html="{ value: vm.orderInfo.pricesNotIssued.totalExtraServiceByGroup.baggage, currency: vm.orderInfo.prices.currency } | price"></td></tr><tr ng-if="vm.orderInfo.pricesNotIssued.totalExtraServiceByGroup.aeroexpress"><td>{{ \'web.choosenFlight.totalAezh\' | aliasStatic}}</td><td ng-bind-html="{ value: vm.orderInfo.pricesNotIssued.totalExtraServiceByGroup.aeroexpress, currency: vm.orderInfo.prices.currency } | price"></td></tr><tr ng-repeat="serviceItem in vm.orderInfo.pricesNotIssued.totalCommonServicesList"><td>{{ \'web.choosenFlight.total\' | aliasWithPrefix:(serviceItem.code | capitalizeFirstLetter) }}</td><td ng-bind-html="{ value: serviceItem.value, currency: vm.orderInfo.prices.currency } | price"></td></tr></tbody></table></div></div></div></div></div><div class="bottom"><div class="total"><table><tbody><tr><td>{{ \'web.choosenFlight.totalPrice\' | aliasStatic}}</td><td><span ng-bind-html="{ value: vm.orderInfo.prices.totalPrice, currency: vm.orderInfo.prices.currency } | price"></span></td></tr></tbody></table></div><div class="bonus" ng-if="vm.orderInfo.ffpSumm"><table><tbody><tr><td><div class="accruedMiles"><i class="icon_milesPay"></i>{{ \'web.choosenFlight.ffpSumm\' | aliasStatic}}</div></td><td ng-bind-html="{ value: vm.orderInfo.ffpSumm, currency: \'miles\' } | price"></td></tr></tbody></table></div><div class="bonus" ng-if="vm.ffpBonus"><table><tbody><tr><td><div class="accruedMiles"><i class="icon_milesPay"></i>{{ \'web.choosenFlight.ffpBonus\' | aliasStatic}}</div></td><td ng-bind-html="{ value: vm.ffpBonus, currency: \'miles\' } | price"></td></tr></tbody></table></div></div></div></div></div></div></div></div></div><div class="payMethods"><div class="payMethods__i"><wrap ng-show="!vm.isFreePricevariant"><h2 class="title">{{ \'web.paymentTypeSelect.header\' | aliasStatic}}</h2><payment-type-select ng-if="vm.priceVariant" price-variant="vm.priceVariant" change-handler="vm.paymentFormChangeHandler" selected-payment-type="vm.selectedPaymentType" selected-payment-form="vm.selectedPaymentForm"></payment-type-select></wrap><div class="iconfirm"><div class="iconfirm__i"><div class="customCheckbox"><label><input type="checkbox" id="iconfirm" ng-model="vm.agree"><span></span></label></div><p><label for="iconfirm"><wrap ng-bind-html="\'web.paymentTypeSelect.agree_1\' | aliasStatic"></wrap>{{ \' \' }} <a href="" fancybox="popupRemark">{{ \'web.paymentTypeSelect.remarkLink\' | aliasStatic}}</a> {{ \' \' }}<wrap ng-bind-html="\'web.paymentTypeSelect.agree_2\' | aliasStatic"></wrap>{{ \' \' }} <a href="{{ vm.orderInfo.conditionsPath }}" target="_blank">{{ \'web.paymentTypeSelect.conditions\' | aliasStatic}}</a> {{ \' \' }}<wrap ng-bind-html="\'web.paymentTypeSelect.agree_3\' | aliasStatic"></wrap></label></p></div></div></div></div><div class="searchResultsControl"><div class="searchResultsControl__i"><a href="#{{$root.ROUTES.PASSENGERS}}" class="btn btn_back">{{ \'web.buttons.back\' | aliasStatic}}</a> <a href="" ng-if="!vm.doBookingAndRegisterOrderLoading" ng-click="vm.submitPayment()" ng-class="{ disabled: (!vm.agree || !vm.selectedPaymentForm || !vm.selectedPaymentType || vm.modifyServicesLoading || vm.orderServicesLoading) }" class="btn btn_next"><span class="mobileHide">{{ vm.isFreePricevariant ? \'web.buttons.confirmRegisterOrder\' : \'web.buttons.gotoPayment\' | aliasStatic}}</span> <span class="mobileShow">{{ \'web.buttons.next\' | aliasStatic}}</span></a></div></div><div ng-if="vm.showNeedSelectPaymentFormMesage" class="infoMessage infoMessage_error"><div class="infoMessage__i"><p>{{ \'web.messages.needSelectPaymentForm\' | aliasStatic}}</p></div></div><div ng-if="vm.bookingError" class="infoMessage infoMessage_error"><div class="infoMessage__i"><p ng-if="vm.bookingError === true">{{ \'web.messages.bookingError\' | aliasStatic}}</p><p ng-if="vm.bookingError !== true">{{ vm.bookingError | aliasDynamic }}</p></div></div></div></div></div><div class="content" ng-if="vm.errorMessage"><div class="wrap wrap_pt32"><div class="content__i"><div><div class="popup__i__caption"><div class="message_error">{{ vm.errorMessage | aliasDynamic }}</div></div></div></div></div></div><div class="push"></div></section><app-footer ng-if="!vm.loading"></app-footer><wrap ng-if="!vm.loading"><popup-remark></popup-remark><popup-alias></popup-alias><popup-cancel-conflict-services></popup-cancel-conflict-services></wrap>');
}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("screens/passengers/passengers.html",'<app-loader ng-if="vm.loading"></app-loader><section class="out" ng-if="!vm.loading"><app-header></app-header><div class="searchSteps"><div class="wrap"><div class="searchSteps__i"><ol><li class="prev"><a href="{{ \'site.mainPageUrl\' | param }}">{{ \'web.steps.search\' | aliasStatic}}</a></li><li class="prev"><a href="#{{$root.ROUTES.SEARCH}}">{{ \'web.steps.selectVariant\' | aliasStatic}}</a></li><li class="active">{{ (vm.passengers.length == 1) ? ( \'web.steps.passenger\' | aliasStatic) : ( \'web.steps.passengers\' | aliasStatic) }}</li><li>{{ \'web.steps.extraServices\' | aliasStatic}}</li><li>{{ \'web.steps.payment\' | aliasStatic}}</li><li>{{ \'web.steps.order\' | aliasStatic}}</li></ol></div></div></div><div ng-if="vm.orderInfo && vm.passengersCheck" class="searchParams searchParams_passengers"><div class="wrap"><div class="searchParams__i"><div class="info"><ul><li><geo-marker prefix="dep__point" key="passengers" city="vm.orderInfo.flights[0].flights[0].origincity" cityname="vm.orderInfo.flights[0].flights[0].origincityName" port="vm.orderInfo.flights[0].flights[0].originport" portname="vm.orderInfo.flights[0].flights[0].originportName"></geo-marker><geo-marker prefix="arr__point" key="passengers" city="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationcity" cityname="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationcityName" port="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationport" portname="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationportName"></geo-marker></li><li ng-show="vm.orderInfo.flights.length == 2">{{ \'web.searchForm.roundtrip\' | aliasStatic}}</li><li ng-show="vm.orderInfo.flights.length == 1">{{ \'web.searchForm.oneway\' | aliasStatic}}</li><li>{{ vm.getDescPassCountStr() }}</li></ul></div></div></div></div><div class="content"><div class="wrap wrap_pt32"><div class="content__i"><div class="passengersInfo"><div class="passengersInfo__i"><h2>{{ (vm.passengers.length == 1) ? ( \'web.passengerInfo.header\' | aliasStatic) : ( \'web.passengersInfo.header\' | aliasStatic) }}</h2><p ng-if="vm.passengersCheck.isLatinNamesOnly && !(\'site.foreignSite\' | param)" class="intAttention">{{ \'web.messages.passNamesLabel\' | aliasStatic}} <span ng-bind-html="\'web.messages.passNamesLatin\' | aliasStatic"></span></p><p class="login" ng-if="!vm.authoriseCustomer && !vm.accountExist">{{ \'web.passengersInfo.loginInvitationMessage\' | aliasStatic}} <a href="" fancybox="popupLogin">{{ \'web.passengersInfo.loginInvitationLink\' | aliasStatic}}</a></p><form class="passengerForm__js {{ vm.getOrderCountriesCssClasses() }}" ng-repeat="(passengerNumber, passenger) in vm.passengers" name="vm.passengerForms[{{passengerNumber}}]" form-submit-error-highlight="" novalidate=""><input type="hidden" name="categoryCode" ng-model="passenger.categoryCode"><div class="item"><div class="item__i"><div class="itemName"><div class="itemName__number"><span ng-show="vm.passengers.length > 1">{{ passengerNumber + 1 }}.</span> {{ \'web.passengerCategory.\' | aliasWithPrefix:passenger.categoryCode }}</div><div class="selectWrap itemName__ui-select" ng-if="vm.authoriseCustomer && vm.privatePassengers.length"><ui-select name="privatePassenger" search-enabled="false" ng-model="passenger.privatePassenger" theme="selectize" ui-select-custom="" ng-change="vm.setPrivatePassenger(passengerNumber)" class="ui-select-passengers-header"><ui-select-match placeholder="{{(vm.currentLanguage !== \'ru\' && $select.selected.value.firstNameEn ? $select.selected.value.firstNameEn : $select.selected.value.firstName) || ( \'web.passengersInfo.privatePassengerSelect\' | aliasStatic)}} {{vm.currentLanguage !== \'ru\' && $select.selected.value.lastNameEn ? $select.selected.value.lastNameEn : $select.selected.value.lastName}}">{{vm.currentLanguage !== \'ru\' && $select.selected.value.firstNameEn ? $select.selected.value.firstNameEn : $select.selected.value.firstName}} {{vm.currentLanguage !== \'ru\' && $select.selected.value.lastNameEn ? $select.selected.value.lastNameEn : $select.selected.value.lastName}}</ui-select-match><ui-select-choices repeat="privatePassenger.num as (num, privatePassenger) in vm.privatePassengers"><div class="ui-select-passengers-data">{{ vm.currentLanguage !== \'ru\' && privatePassenger.value.firstNameEn ? privatePassenger.value.firstNameEn : privatePassenger.value.firstName }} {{ vm.currentLanguage !== \'ru\' && privatePassenger.value.lastNameEn ? privatePassenger.value.lastNameEn : privatePassenger.value.lastName }}</div><div class="ui-select-passengers-birth">{{ privatePassenger.value.dateOfBirth }}</div></ui-select-choices></ui-select></div></div><table class="passengerInfo"><tbody><tr><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].lastName" touched="vm.submitTouched"></error-message><input type="text" name="lastName" autocomplete="off" ng-model="passenger.lastName" ng-blur="vm.lastNameBlurHandler(passengerNumber)" required="" ng-pattern="(passenger.documentType == \'PSP\') ? vm.passengerLastNameLatRegexp : vm.passengersCheck.passengerLastNameRegexp" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.lastName\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].firstName" touched="vm.submitTouched"></error-message><input type="text" name="firstName" autocomplete="off" ng-model="passenger.firstName" ng-blur="vm.firstNameBlurHandler(passengerNumber)" required="" ng-pattern="(passenger.documentType == \'PSP\') ? vm.passengerFirstNameLatRegexp : vm.passengersCheck.passengerFirstNameRegexp" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.firstName\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].dateOfBirth" touched="vm.submitTouched"></error-message><input type="text" name="dateOfBirth" autocomplete="off" ng-model="passenger.dateOfBirth" required="" check-date-format="" check-date-range="" data-min-date="{{ vm.rangeBirthByPassenger[passengerNumber].from }}" data-max-date="{{ vm.rangeBirthByPassenger[passengerNumber].to }}" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}" ui-mask="99.99.9999" model-view-value="true" ui-mask-placeholder="{{ \'web.datePattern\' | aliasStatic}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.dateOfBirth\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].gender" touched="vm.submitTouched"></error-message><ui-select ng-model="passenger.gender" theme="selectize" name="gender" search-enabled="false" error-highlight="{{vm.submitTouched}}" ui-select-custom="" class="ui-select-custom ui-select-passengers" required=""><ui-select-match placeholder="{{$select.selected.name || ( \'web.privatePassengers.gender\' | aliasStatic) }}">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="gender.code as gender in vm.passangersAlias"><div ng-bind-html="gender.name"></div></ui-select-choices></ui-select><label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.gender\' | aliasStatic}}</span></label></div></td></tr><tr><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].nationality" touched="vm.submitTouched"></error-message><ui-select ng-model="passenger.nationality" theme="selectize" name="nationality" search-enabled="{{ !vm.isMobile }}" skip-focusser="true" ng-change="vm.nationalityChangeHandler(passengerNumber)" error-highlight="{{vm.submitTouched}}" ui-select-custom="" class="ui-select-custom ui-select-passengers" required=""><ui-select-match placeholder="{{$select.selected[vm.localNamePropName] || ( \'web.privatePassengers.nationality\' | aliasStatic) }}">{{$select.selected[vm.localNamePropName]}}</ui-select-match><ui-select-choices repeat="country.code as country in vm.countriesList | filter: {[vm.localNamePropName]: $select.search} track by country.code"><div ng-bind-html="country[vm.localNamePropName]"></div></ui-select-choices></ui-select><label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.nationality\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].documentType" touched="vm.submitTouched"></error-message><ui-select ng-model="passenger.documentType" name="documentType" theme="selectize" search-enabled="false" ng-change="vm.documentTypeChangeHandler(passengerNumber)" class="ui-select-custom ui-select-passengers" ui-select-custom="" error-highlight="{{vm.submitTouched}}" required=""><ui-select-match placeholder="{{$select.selected.name || ( \'web.passengersInfo.documentType\' | aliasStatic) }}">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="doc.code as doc in vm.documentTypesByPassenger[passengerNumber]"><div class="{{ \'documentTypeOption_\' + doc.code }}" ng-bind-html="doc.name"></div></ui-select-choices></ui-select><label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.documentType\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message ng-if="passenger.documentType !== \'SR\' && passenger.documentType && vm.hasAlias(\'web.messages.formatDocumentNumber.\' + passenger.documentType)" control="vm.passengerForms[passengerNumber].documentNumber" touched="vm.submitTouched"></error-message><error-message ng-if="passenger.documentType && passenger.documentType === \'SR\' && vm.hasAlias(\'web.messages.formatDocumentNumber.\' + passenger.documentType) && passenger.nationality === \'RU\'" ng-class="{\'errorMessage--required\': vm.passengerForms[passengerNumber].documentNumber.$error.required, \'errorMessage--format\': vm.passengerForms[passengerNumber].documentNumber.$error.pattern}" control="vm.passengerForms[passengerNumber].documentNumber" format-alias="\'web.messages.formatDocumentNumber.SR\' | aliasStatic" touched="vm.submitTouched"></error-message><info-message ng-if="passenger.documentType !== \'SR\' && passenger.documentType && vm.hasAlias(\'web.messages.formatDocumentNumber.\' + passenger.documentType)" touched="vm.submitTouched" control="vm.passengerForms[passengerNumber].documentNumber" format-alias="\'web.messages.formatDocumentNumber.\' + passenger.documentType"></info-message><info-message ng-if="passenger.documentType && passenger.documentType === \'SR\' && vm.hasAlias(\'web.messages.formatDocumentNumber.\' + passenger.documentType) && passenger.nationality === \'RU\'" touched="vm.submitTouched" control="vm.passengerForms[passengerNumber].documentNumber" format-alias="\'web.messages.formatDocumentNumber.\' + passenger.documentType"></info-message><input type="text" name="documentNumber" autocomplete="off" ng-model="passenger.documentNumber" required="" clean-document-number="" ng-pattern="vm.documentNumberRegexByPassenger[passengerNumber]" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.documentNumber\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer" ng-if="vm.getExpiryByDocType(passenger.documentType, passenger.categoryCode)"><error-message control="vm.passengerForms[passengerNumber].documentDate" touched="vm.submitTouched"></error-message><input type="text" name="documentDate" autocomplete="off" ng-model="passenger.documentDate" required="" check-date-format="" check-date-range="" data-min-date="{{ vm.getExpiryByDocType(passenger.documentType, passenger.categoryCode) }}" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}" ui-mask="99.99.9999" model-view-value="true" ui-mask-placeholder="{{ \'web.datePattern\' | aliasStatic}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.documentDate\' | aliasStatic}}</span></label></div></td></tr><tr ng-if="(passenger.categoryCode == \'AAA\' || passenger.categoryCode == \'CPA\' || passenger.categoryCode == \'MLA\') && (vm.passengersCheck.allowEmail || vm.passengersCheck.allowPhone)"><td><div class="inp inp-animate-outer" ng-if="vm.passengersCheck.allowPhone"><error-message control="vm.passengerForms[passengerNumber].phone" format-alias="\'web.messages.formatPhone\'" touched="vm.submitTouched"></error-message><input type="tel" name="phone" autocomplete="off" ng-model="passenger.phone" ng-blur="vm.phoneBlurHandler(passengerNumber)" phone-mask="" ng-required="vm.passengersCheck.requirePhone" ng-pattern="\'customer.phoneRegexp\' | param" class="textInp inp-animate-placeholder" ng-class="{ js_phone_for_nationality_RU : passenger.nationality == \'RU\' }" error-highlight="{{vm.submitTouched}}" placeholder=""> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.phone\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer" ng-if="vm.passengersCheck.allowEmail"><error-message control="vm.passengerForms[passengerNumber].email" touched="vm.submitTouched"></error-message><input type="email" name="email" autocomplete="off" ng-model="passenger.email" ng-blur="vm.emailBlurHandler(passengerNumber)" ng-required="vm.passengersCheck.requireEmail" ng-pattern="vm.passengersCheck.emailRegex" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.email\' | aliasStatic}}</span></label></div></td><td class="mobileHide"></td><td class="mobileHide"></td></tr><tr ng-if="(passenger.categoryCode == \'AAA\' || passenger.categoryCode == \'CPA\' || passenger.categoryCode == \'MLA\') && vm.allowBonusCard"><td><div class="inp"><div class="customCheckbox"><label><input class="haveCart_js" type="checkbox" name="hasBonusCard" ng-model="passenger.hasBonusCard" ng-change="passenger.bonusCard = \'\';"><span></span> {{ \'web.passengersInfo.hasBonusCard\' | aliasStatic}}</label></div></div></td><td><div class="inp inp-animate-outer" ng-class="{ invisibleBonusCard: !passenger.hasBonusCard, visibleBonusCard: passenger.hasBonusCard }"><error-message control="vm.passengerForms[passengerNumber].bonusCard" touched="vm.submitTouched"></error-message><input type="text" class="inp-animate-placeholder" name="bonusCard" autocomplete="off" ng-model="passenger.bonusCard" ng-pattern="\'passengers.bonusCardRegex\' | param" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.bonusCard\' | aliasStatic}}</span></label></div></td><td class="mobileHide"></td><td class="mobileHide"></td></tr></tbody></table></div></div></form><form ng-if="vm.orderInfo && vm.passengersCheck" name="vm.customerForm" class="customerForm__js" form-submit-error-highlight="" novalidate=""><div class="item item_contact"><div class="item__i"><h3 class="itemName">{{ \'web.passengersInfo.customerHeader\' | aliasStatic}}</h3><table><tbody><tr><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.lastName" touched="vm.submitTouched"></error-message><input type="text" name="lastName" autocomplete="off" ng-model="vm.customer.lastName" required="" ng-pattern="\'customer.lastNameRegexp\' | param" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.lastName\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.firstName" touched="vm.submitTouched"></error-message><input type="text" name="firstName" autocomplete="off" ng-model="vm.customer.firstName" required="" ng-pattern="\'customer.firstNameRegexp\' | param" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.firstName\' | aliasStatic}}</span></label></div></td></tr><tr><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.phone" format-alias="\'web.messages.formatPhone\'" touched="vm.submitTouched"></error-message><input type="tel" name="phone" autocomplete="off" ng-model="vm.customer.phone" phone-mask="" ng-pattern="\'customer.phoneRegexp\' | param" required="" class="textInp inp-animate-placeholder" ng-class="{ js_phone_for_nationality_RU : vm.passengers[0].nationality == \'RU\' }" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.phone\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.email" touched="vm.submitTouched"></error-message><input type="email" name="email" autocomplete="off" ng-model="vm.customer.email" required="" ng-pattern="\'site.emailRegexp\' | param" ng-change="vm.checkLogin()" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.email\' | aliasStatic}}</span></label></div></td></tr><tr ng-if="!vm.authoriseCustomer && vm.allowCreateAccount && vm.customer.createAccount"><td><div class="inp"><error-message control="vm.customerForm.password" touched="vm.submitTouched"></error-message><input type="password" name="password" autocomplete="off" ng-model="vm.customer.password" required="" ng-pattern="\'site.passwordRegexp\' | param" check-equals="{{ vm.customer.passwordRepeat }}" class="textInp" error-highlight="{{vm.submitTouched}}" tabindex="1000" placeholder="{{ \'web.customerInfo.password\' | aliasStatic}}"></div></td><td><div class="inp"><error-message control="vm.customerForm.passwordRepeat" touched="vm.submitTouched"></error-message><input type="password" name="passwordRepeat" autocomplete="off" ng-model="vm.customer.passwordRepeat" required="" ng-pattern="\'site.passwordRegexp\' | param" check-equals="{{ vm.customer.password }}" class="textInp" error-highlight="{{vm.submitTouched}}" tabindex="1001" placeholder="{{ \'web.customerInfo.passwordRepeat\' | aliasStatic}}"></div></td></tr><tr><td colspan="2"><div class="inp" ng-if="!vm.authoriseCustomer && vm.allowCreateAccount"><div class="customCheckbox"><label><input type="checkbox" ng-model="vm.customer.createAccount"> <span></span> {{ \'web.passengersInfo.createAccountInvitationMessage\' | aliasStatic}}</label></div></div></td></tr></tbody></table></div></div></form><p class="login" ng-if="!vm.authoriseCustomer && vm.accountExist">{{ \'web.passengersInfo.accountExistMessage\' | aliasStatic}} {{ vm.customer.email }} <a href="" fancybox="popupLogin" data-login="{{ vm.customer.email }}">{{ \'web.passengersInfo.loginInvitationLink\' | aliasStatic}}</a></p><div ng-if="vm.errorMessage" class="infoMessage infoMessage_error"><div class="infoMessage__i"><p ng-bind-html="vm.errorMessage | aliasDynamic"></p></div></div><div ng-if="\'passengers.usePersonalDataAgreeCheckbox\' | param" class="iconfirm"><div class="iconfirm__i"><div class="customCheckbox"><label><input type="checkbox" id="personalDataShareAgreeChb" ng-model="vm.personalDataShareAgree"><span></span></label></div><p><label for="personalDataShareAgreeChb"><wrap ng-bind-html="\'web.personalDataShareAgree\' | aliasStatic"></wrap></label></p></div></div><div class="passengers-form-footer" ng-bind-html="\'web.passengersInfo.footer\' | aliasStatic"></div></div></div><div class="searchResultsControl"><div class="searchResultsControl__i"><a href="#{{$root.ROUTES.SEARCH}}" class="btn btn_back">{{ \'web.buttons.back\' | aliasDynamic }}</a><a href="" class="btn btn_next disabled loading-start" ng-if="vm.submitLoading"><span class="loader"><img alt="" src="themes/websky/assets/static/img/general/form/loader-circle-64.gif"></span> <span class="mobileHide">{{ \'web.buttons.gotoExtraServices\' | aliasStatic}}</span> <span class="mobileShow">{{ \'web.buttons.next\' | aliasStatic}}</span></a></div></div></div></div></div><div class="push"></div></section><app-footer ng-if="!vm.loading"></app-footer>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("screens/search/search.html",'<app-loader ng-if="vm.loadingVariants || vm.loadingPeriodVariants || vm.loading"></app-loader><section class="out" ng-if="!vm.loading"><app-header></app-header><div class="searchSteps" ng-if="!vm.searchResult"><div class="wrap"><div class="searchSteps__i"><ol><li ng-if="vm.formOpened" class="active">{{ \'web.steps.search\' | alias }}</li><li ng-if="vm.formOpened">{{ \'web.steps.selectVariant\' | alias }}</li><li ng-if="!vm.formOpened" class="prev"><a href="{{ \'site.mainPageUrl\' | param }}">{{ \'web.steps.search\' | alias }}</a></li><li ng-if="!vm.formOpened" class="active">{{ \'web.steps.selectVariant\' | alias }}</li><li>{{ \'web.steps.passengers\' | alias }}</li><li>{{ \'web.steps.extraServices\' | alias }}</li><li>{{ \'web.steps.payment\' | alias }}</li><li>{{ \'web.steps.order\' | alias }}</li></ol></div></div></div><search-form update-params="vm.updateSearchParams" submit="vm.searchSubmitHandler" change="vm.ruslineSearchChangeHandler" switch="vm.showSearchSwitch" opened="vm.formOpened" limits="vm.bookingLimits" nearest="vm.nearestDates" error="!vm.loadingPeriodVariants && vm.searchResultError" lsp="vm.lastSearchParams" ffp="!!vm.ffpUser" ffp-login-error="vm.ffpLoginError"></search-form><div class="profileInfo" ng-if="vm.ffpUser"><div class="wrap"><div class="profileInfo__i"><div class="milesText">{{ \'web.search.bonus.cardNumberLabel\' | alias }} {{ vm.ffpUser.cardNumber }}, {{ \'web.search.bonus.accountLabel\' | alias }} <strong ng-bind-html="{ value: vm.ffpUser.balance, currency: \'miles\' } | price"></strong><div class="milesCross" ng-click="vm.logoutFFP();"><i class="icon_remove"></i><div class="infoDrop"><div class="infoDrop__i"><p>{{ \'web.search.bonus.logoutLabel\' | alias }}</p></div></div></div></div></div></div></div><div class="content content-search-result" ng-if="vm.searchResult || vm.searchResultErrorButHasPeriodVariants"><div class="wrap wrap_pt32" ng-class="{ \'rsln-wrap\': ( \'search.useMonoBrandCartesian\' | param )}"><div class="content__i"><div ng-if="vm.searchResultErrorButHasPeriodVariants" class="orderSearchError"><div class="orderSearchError__i"><p ng-bind-html="\'web.messages.searchResultErrorButHasPeriodVariants.header\' | aliasStatic"></p><p ng-bind-html="\'web.messages.searchResultErrorButHasPeriodVariants.text\' | aliasStatic"></p></div></div><wrap ng-if="!vm.ffpUser"><search-mono-brand-cartesian-variants ng-if="( \'search.useMonoBrandCartesian\' | param )" result="vm.searchResult" period="vm.searchResultPeriod" loading="vm.loadingPeriodVariants" params="vm.searchParams" limits="vm.bookingLimits" resubmit="vm.searchSubmitHandler" select="vm.monoBrandCartesianVariantSelectHandler"></search-mono-brand-cartesian-variants><wrap ng-if="!( \'search.useMonoBrandCartesian\' | param )"><search-variants ng-if="!vm.searchResult.fareGroups" result="vm.searchResult" params="vm.searchParams" select="vm.variantSelectHandler"></search-variants><search-fare-group-variants ng-if="vm.searchResult.fareGroups" result="vm.searchResult" period="vm.searchResultPeriod" loading="vm.loadingPeriodVariants" params="vm.searchParams" limits="vm.bookingLimits" resubmit="vm.searchSubmitHandler" select="vm.fareGroupVariantSelectHandler"></search-fare-group-variants></wrap></wrap><search-ffp-variants ng-if="vm.ffpUser" result="vm.searchResult" period="vm.searchResultPeriod" params="vm.searchParams" limits="vm.bookingLimits" resubmit="vm.searchSubmitHandler" select="vm.ffpVariantSelectHandler"></search-ffp-variants><selected-variant ng-if="vm.selectedVariantsInfo" info="vm.selectedVariantsInfo" pricing="vm.pricingVariant"></selected-variant><a name="selected-variant"></a><div ng-if="vm.pricingVariantError" class="infoMessage infoMessage_error"><div class="infoMessage__i"><p>{{ vm.pricingVariantError | alias }}</p></div></div><div class="searchResultsControl rsln-searchResultsControl" ng-if="!vm.selectedVariantsInfo && vm.searchResult"><div class="searchResultsControl__i rsln-searchResultsControl__i"><a href="" class="btn rsln-searchResultsControl__btn disabled" ng-if="!vm.selectedVariantsInfo" ng-class="{ \'loading-start\': vm.loadingPricingVariant }"><span>{{ \'web.buttons.next\' | alias }}</span></a></div></div></div></div></div><div class="push"></div></section><app-footer ng-if="!vm.loading"></app-footer><popup-intermodal ng-if="!vm.loading" list="vm.intermodalList"></popup-intermodal>')}])}();